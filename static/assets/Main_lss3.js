import{_ as pe,r as g,s as ve,b as ge,v as fe,u as he,a as be,w as P,o as ye,a9 as xe,z as ke,x as we,A as S,c as n,d as a,t as r,F as f,f as x,e as y,L as d,a0 as $e,B as h,aa as Se,C as Ve,D as Q,E as T,G as Z,H as De,I as E,J as Ie,i as O,ab as ze,j as o,n as k,N as C,O as Ne,h as i,M as V,P as W,Q as X,k as R,l as Ce,y as Me,a2 as Pe,m as Te,a3 as Ee,g as Oe,R as Re,S as ee,T as U,ac as Ue,U as He,V as qe}from"./lss.js";import{_ as Be,P as Je,a as Le}from"./NotesForm_lss.js";import{_ as je,a as Ke}from"./MessageSettings_lss.js";const Ae=D=>(He("data-v-1743e870"),D=D(),qe(),D),Fe={key:0,class:"flex flex-col h-full"},Ge={class:"flex items-center sm:px-20 lg:pt-5 mt-3 pb-4 intro-y"},Ye={class:"text-xl sm:text-2xl font-medium mx-auto sm:mx-0"},Qe={class:"col-span-12 col-start-1 sm:col-span-6"},Ze={class:"flex flex-col"},We={class:"w-20 my-auto text-base form-label font-medium"},Xe={key:0,class:"text-danger text-[14px] ml-20"},et={class:"col-span-12 sm:col-span-6"},tt={class:"flex flex-col"},at={class:"flex whitespace-nowrap align-middle"},st={for:"regular-form-2",class:"w-16 my-auto text-base form-label font-medium"},lt={class:"flex items-center justify-center"},ot=["value"],nt=["value"],it={class:"col-span-12 flex items-center justify-between py-3 mt-5 leading-5 border-2 rounded-md border-slate-200"},rt={class:"inline-flex my-auto ml-2 leading-5 align-middle md:ml-3 text-lg font-medium"},dt={class:"inline-flex justify-around w-20 ml-auto mr-3 align-middle md:mr-5"},ut={key:0,class:"w-8 h-8 border-0 flex-0 md:w-10 md:h-10 zoom-in"},ct={class:"absolute bottom-0 right-0 w-5 h-5 border-2 border-white rounded-full dark:border-darkmode-600"},mt=["src"],_t={key:1,class:"w-8 h-8 border-0 flex-0 md:w-10 md:h-10 zoom-in"},pt={class:"absolute bottom-0 right-0 w-5 h-5 border-2 border-white rounded-full dark:border-darkmode-600"},vt=["src"],gt={key:0,class:"border-0 w-14 h-14 flex-0 relative"},ft={class:"absolute bottom-0 right-0 w-5 h-5 border-2 border-white rounded-full dark:border-darkmode-600"},ht=["src"],bt={key:2,class:"w-8 h-8 flex-0 md:w-10 md:h-10 zoom-in"},yt={class:"absolute bottom-0 right-0 w-5 h-5 border-2 border-white rounded-full dark:border-darkmode-600"},xt=["src"],kt={key:3,class:"w-8 h-8 flex-0 md:w-10 md:h-10 zoom-in"},wt={class:"absolute bottom-0 right-0 w-5 h-5 border-2 border-white rounded-full dark:border-darkmode-600"},$t=["src"],St={key:4,class:"w-8 h-8 flex-0 md:w-10 md:h-10 zoom-in"},Vt={class:"absolute bottom-0 right-0 w-5 h-5 border-2 border-white rounded-full dark:border-darkmode-600"},Dt=["src"],It={key:5,class:"w-8 h-8 flex-0 md:w-10 md:h-10 zoom-in"},zt={class:"absolute bottom-0 right-0 w-5 h-5 border-2 border-white rounded-full dark:border-darkmode-600"},Nt=["src"],Ct={class:"text-xl font-medium leading-none lg:-mx-6"},Mt=Ae(()=>a("hr",{class:"-mx-6 my-4"},null,-1)),Pt={class:"flex flex-col mb-3"},Tt={class:"form-label text-base font-medium"},Et=["disabled"],Ot={value:null},Rt=["value"],Ut=["disabled"],Ht={value:null},qt=["value"],Bt={class:"flex mb-3 form-label text-base font-medium"},Jt={class:"flex my-1"},Lt=["value"],jt={class:"flex my-3 mt-5 form-label text-base font-medium"},Kt={class:"mr-5"},At={class:"flex my-1"},Ft=["value"],Gt={class:"flex my-3 mt-5 form-label text-base font-medium"},Yt={class:"mr-5"},Qt={class:"flex my-1"},Zt=["value"],Wt={class:"flex my-3 mt-5 form-label text-base font-medium"},Xt={class:"mr-5"},ea={class:"flex my-1"},ta=["value"],aa={class:"box col-span-12 flex justify-end shadow-none -mt-5 lg:mx-20 lg:px-40 px-10 py-10"},sa={__name:"Main",setup(D){g(null);const te=ve(),p=ge(),H=fe(),ae=$e(),I=he(),se=be(),le=Intl.DateTimeFormat().resolvedOptions().timeZone,q=P(()=>{var t=["date","general","logistics","payments","points","messages","notes"];return p.userInfo.user_subscription.type=="kol"&&(t=t.filter(l=>l!="points"),t=t.filter(l=>l!="payments")),e.value.supplier&&(t=t.filter(l=>l!="logistics"),t=t.filter(l=>l!="messages"),t=t.filter(l=>l!="notes")),t}),oe=g([{value:"USD",text:"USD"},{value:"NTD",text:"NTD"},{value:"SGD",text:"SGD"},{value:"IDR",text:"IDR"},{value:"PHP",text:"PHP"},{value:"MYR",text:"MYR"},{value:"VND",text:"VND"},{value:"RMB",text:"RMB"},{value:"KHR",text:"KHR"},{value:"AUD",text:"AUD"},{value:"HKD",text:"HKD"}]),ne=g([{key:"1",value:"1"},{key:"1000",value:"1000"},{key:"1000000",value:"1000000"}]),ie=g([{value:"en",text:"English"},{value:"zh_hant",text:"Chinese-tranditional"},{value:"zh_hans",text:"Chinese-simplify"},{value:"vi",text:"Vietnamese"}]),re=g([{value:"2",text:"0.01"},{value:"0",text:"1"}]);g([]);const B=g([]),e=g({}),w=g({start:new Date,end:new Date}),$=g({meta_logistic:{delivery_note:""},meta_payment:{special_note:"",confirmation_note:""}}),de=ae.appContext.config.globalProperties.eventBus,J=g(!1);ye(()=>{xe(I.params.campaign_id,p.alert).then(t=>{e.value=JSON.parse(JSON.stringify(t.data)),console.log(e.value),e.value.decimal_places=t.data.decimal_places.toString(),w.value.start=t.data.start_at,w.value.end=t.data.end_at,$.value.meta_logistic.delivery_note=JSON.parse(JSON.stringify(e.value.meta_logistic.delivery_note)),e.value.meta_logistic.delivery_date=e.value.meta_logistic.delivery_date?e.value.meta_logistic.delivery_date:{start_at:null,end_at:null},p.userInfo.user_subscription.country&&(e.value.country=p.userInfo.user_subscription.country);const l=new Set;p.userInfo.user_subscription.meta_country.activated_country.forEach(v=>{H[v].forEach(c=>l.add(c))}),l.forEach(v=>{v in e.value.meta_payment||(e.value.meta_payment[v]={},H[v].fields.forEach(c=>{e.value.meta_payment[v][c.key]=c.default}),e.value.meta_payment[v].enabled=!1)}),$.value.meta_payment.special_note=JSON.parse(JSON.stringify(t.data.meta_payment.special_note)),$.value.meta_payment.confirmation_note=JSON.parse(JSON.stringify(t.data.meta_payment.confirmation_note)),console.log(e.value),J.value=!0})}),ke(P(()=>w.value),()=>{e.value.start_at=w.value.start,e.value.end_at=w.value.end},{deep:!0});const ue=P(()=>{let t={title:{required:h,minLength:Se(1),maxLength:Ve(255)},meta_logistic:{delivery_charge:{required:h,decimal:Q,minValue:T(0)},free_delivery_for_order_above_price:{required:Z(()=>e.value.meta_logistic.is_free_delivery_for_order_above_price==!0),decimal:Q,minValue:T(.01)},free_delivery_for_how_many_order_minimum:{required:Z(()=>e.value.meta_logistic.is_free_delivery_for_how_many_order_minimum==!0),integer:De,minValue:T(1)},additional_delivery_options:{$each:E.forEach({region:{required:h},title:{required:h},type:{required:h},price:{required:h,numeric:Ie}})},pickup_options:{$each:E.forEach({name:{required:h},address:{required:h}})}},supplier:{}};return q.value.includes("payments")&&(t.meta_payment={direct_payment:{v2_accounts:{$each:E.forEach({mode:{required:h},name:{required:h},number:{required:h}})}}}),t}),u=we(ue,e),ce=()=>{var l,v,c;if(u.value.$touch(),u.value.$invalid){p.alert.showMessageToast(O.global.t("edit_campaign.invalid_data"));return}if(console.log(e.value.meta_logistic.delivery_date),e.value.meta_logistic.delivery_date.start_at&&(((v=(l=e.value.meta_logistic.delivery_date)==null?void 0:l.options)==null?void 0:v.length)==0||((c=e.value.meta_logistic.delivery_date)==null?void 0:c.options)==null)){p.alert.showMessageToast(O.global.t("create_campaign.delivery_form.errors.delivery_time_required")),document.querySelector("#lss-content").scrollTo(0,0);return}for(let b=0;b<e.value.meta_logistic.pickup_options.length;b++)if(e.value.meta_logistic.pickup_options[b].start_at&&!e.value.meta_logistic.pickup_options[b].options){p.alert.showMessageToast(O.global.t("create_campaign.delivery_form.errors.pickup_time_required")),document.querySelector("#lss-content").scrollTo(0,0);return}e.value.meta_logistic.delivery_note=$.value.meta_logistic.delivery_note,e.value.meta_payment.special_note=$.value.meta_payment.special_note,e.value.meta_payment.confirmation_note=$.value.meta_payment.confirmation_note;let t=new FormData;t.append("data",JSON.stringify(e.value)),console.log(e.value),B.value.forEach((b,z)=>{const M=e.value.meta_payment.direct_payment.v2_accounts[z].name+"_"+z;t.append(M,b)}),ze(I.params.campaign_id,t,p.alert).then(b=>{te.campaign=b.data,se.push({name:"campaign-list"})})},me=()=>{de.emit("showEnterPostIDModal",{campaign:e.value})};return(t,l)=>{const v=S("HelpCircleIcon"),c=S("Tippy"),b=S("ChevronsRightIcon"),z=S("v-date-picker"),M=S("SimpleIcon"),N=S("TomSelect");return o(),n(f,null,[J.value?(o(),n("div",Fe,[a("div",Ge,[a("h2",Ye,r(t.$t("edit_campaign.edit_campaign")),1)]),(o(!0),n(f,null,x(q.value,(m,_e)=>{var L,j,K;return o(),n(f,{key:_e},[m=="date"?(o(),n("div",{key:0,class:k([m,"box grid grid-cols-12 gap-4 p-5 intro-y lg:mx-20 lg:px-40"])},[a("div",Qe,[a("div",Ze,[a("label",We,r(t.$t("edit_campaign.title")),1),C(a("input",{class:k(["w-full form-control",{"border-danger":i(u).title.$error}]),type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>i(u).title.$model=s),onBlur:l[1]||(l[1]=(...s)=>i(u).title.$touch&&i(u).title.$touch(...s))},null,34),[[Ne,i(u).title.$model,void 0,{trim:!0}]])]),i(u).title.$error?(o(),n("label",Xe,r(t.$t("edit_campaign.title_required")),1)):y("",!0)]),a("div",et,[a("div",tt,[a("div",at,[a("label",st,r(t.$t("edit_campaign.period")),1),d(c,{class:"rounded-full w-fit whitespace-wrap ml-1 my-auto","data-tippy-allowHTML":"true","data-tippy-placement":"right",content:t.$t("tooltips.create_campaign.campaign_period")},{default:V(()=>[d(v,{class:"w-5 tippy-icon"})]),_:1},8,["content"])]),d(z,{class:"z-49",modelValue:w.value,"onUpdate:modelValue":l[2]||(l[2]=s=>w.value=s),timezone:i(le),columns:1,mode:"dateTime","is-range":"","is-required":"",is24hr:"","min-date":new Date},{default:V(({inputValue:s,inputEvents:_})=>[a("div",lt,[a("input",W({value:s.start},X(_.start,!0),{class:"form-control border h-[35px] sm:h-[42px] px-2 py-1 w-42 rounded focus:outline-none focus:border-indigo-300"}),null,16,ot),d(b,{class:"w-8 h-8 m-1"}),a("input",W({value:s.end},X(_.end,!0),{disabled:"",class:"form-control border h-[35px] sm:h-[42px] px-2 py-1 w-42 rounded focus:outline-none focus:border-indigo-300"}),null,16,nt)])]),_:1},8,["modelValue","timezone","min-date"])])]),a("div",it,[a("h3",rt,r(t.$t("edit_campaign.connected_platform")),1),a("div",dt,[e.value.facebook_page?(o(),n("div",ut,[d(c,{tag:"img",class:"border-0 rounded-full",src:e.value.facebook_page.image,content:e.value.facebook_page.name},null,8,["src","content"]),a("div",ct,[a("img",{class:"rounded-full bg-[#3c599b]",src:i(R)},null,8,mt)])])):y("",!0),e.value.sub_facebook_page?(o(),n("div",_t,[d(c,{tag:"img",class:"border-0 rounded-full",src:e.value.sub_facebook_page.image,content:e.value.sub_facebook_page.name},null,8,["src","content"]),a("div",pt,[a("img",{class:"rounded-full bg-[#3c599b]",src:i(R)},null,8,vt)])])):y("",!0),(o(),n(f,null,x(["_3","_4","_5","_6"],(s,_)=>{var A,F,G;return o(),n(f,{key:_},[(A=t.campaign)!=null&&A[`sub_facebook_page${s}`]?(o(),n("div",gt,[d(c,{tag:"img",class:"border-0 rounded-full",src:(F=t.campaign)==null?void 0:F[`sub_facebook_page${s}`].image,onError:la=>{var Y;return t.getFacebookPageProfilePicture((Y=t.campaign)==null?void 0:Y[`sub_facebook_page${s}`])},content:(G=t.campaign)==null?void 0:G[`sub_facebook_page${s}`].name},null,8,["src","onError","content"]),a("div",ft,[a("img",{class:"rounded-full bg-[#3c599b]",src:i(R)},null,8,ht)])])):y("",!0)],64)}),64)),e.value.instagram_profile?(o(),n("div",bt,[d(c,{tag:"img",class:"rounded-full",src:e.value.instagram_profile.image,content:e.value.instagram_profile.name},null,8,["src","content"]),a("div",yt,[a("img",{class:"rounded-full bg-[#d63376]",src:i(Ce)},null,8,xt)])])):y("",!0),e.value.youtube_channel?(o(),n("div",kt,[d(c,{tag:"img",class:"rounded-full",src:e.value.youtube_channel.image,content:e.value.youtube_channel.name},null,8,["src","content"]),a("div",wt,[a("img",{class:"rounded-full bg-[#f70000]",src:i(Me)},null,8,$t)])])):y("",!0),e.value.twitch_channel?(o(),n("div",St,[d(c,{tag:"img",class:"rounded-full",src:e.value.twitch_channel.image,content:e.value.twitch_channel.name},null,8,["src","content"]),a("div",Vt,[a("img",{class:"rounded-full bg-[#f70000]",src:i(Pe)},null,8,Dt)])])):y("",!0),e.value.tiktok_campaign.username?(o(),n("div",It,[d(c,{tag:"img",class:"rounded-full",src:i(Te),content:e.value.tiktok_campaign.username},null,8,["src","content"]),a("div",zt,[a("img",{class:"rounded-full bg-[#0f0f0f]",src:i(Ee)},null,8,Nt)])])):y("",!0)]),a("a",{onClick:l[3]||(l[3]=s=>me()),class:"inline-flex mr-2 align-middle md:mr-5"},[d(M,{icon:"edit",color:"#2d8cf0",class:"mr-1"}),Oe(" "+r(t.$t("edit_campaign.edit_connected_platform")),1)])])],2)):m=="general"?(o(),n("div",{key:1,class:k([m,"box p-5 lg:mx-20 lg:px-40 mt-3 sm:p-8 text-sm sm:text-lg"])},[a("span",Ct,r(t.$t("create_campaign.general_settings")),1),Mt,C(a("div",Pt,[a("span",Tt,r(t.$t("edit_campaign.selectSupplier")),1),i(u).supplier.$model?C((o(),n("select",{key:0,class:"form-select h-[35px] sm:h-[42px] w-full","onUpdate:modelValue":l[4]||(l[4]=s=>i(u).supplier.$model.id=s),disabled:i(I).name==="edit-campaign"},[a("option",Ot,r(t.$t("create_campaign.my_stock")),1),(o(!0),n(f,null,x((L=i(p).userInfo.user_subscription.meta_store)==null?void 0:L.support_stock_user_subscriptions,(s,_)=>(o(),n("option",{key:_,value:s.user_subscription_id},r(s.name),9,Rt))),128))],8,Et)),[[ee,i(u).supplier.$model.id]]):C((o(),n("select",{key:1,class:"form-select h-[35px] sm:h-[42px] w-full","onUpdate:modelValue":l[5]||(l[5]=s=>i(u).supplier.$model=s),disabled:i(I).name==="edit-campaign"},[a("option",Ht,r(t.$t("create_campaign.my_stock")),1),(o(!0),n(f,null,x((j=i(p).userInfo.user_subscription.meta_store)==null?void 0:j.support_stock_user_subscriptions,(s,_)=>(o(),n("option",{key:_,value:s.user_subscription_id},r(s.name),9,qt))),128))],8,Ut)),[[ee,i(u).supplier.$model]])],512),[[Re,(K=i(p).userInfo.user_subscription.meta_store)==null?void 0:K.support_stock_user_subscriptions]]),a("div",Bt,[a("div",null,r(t.$t("settings.localization.currency_symbol")),1)]),a("div",Jt,[d(N,{modelValue:e.value.currency,"onUpdate:modelValue":l[6]||(l[6]=s=>e.value.currency=s),options:{placeholder:t.$t("settings.localization.choose_currency_symbol")},class:"w-full"},{default:V(()=>[(o(!0),n(f,null,x(oe.value,(s,_)=>(o(),n("option",{value:s.value,key:_},r(s.text),9,Lt))),128))]),_:2},1032,["modelValue","options"])]),a("div",jt,[a("div",Kt,r(t.$t("settings.localization.buyer_language")),1)]),a("div",At,[d(N,{modelValue:e.value.lang,"onUpdate:modelValue":l[7]||(l[7]=s=>e.value.lang=s),options:{placeholder:t.$t("settings.localization.choose_language")},class:"w-full"},{default:V(()=>[(o(!0),n(f,null,x(ie.value,(s,_)=>(o(),n("option",{value:s.value,key:_},r(t.$t(`settings.localization.languages.${s.value}`)),9,Ft))),128))]),_:2},1032,["modelValue","options"])]),a("div",Gt,[a("div",Yt,r(t.$t("settings.localization.price_unit")),1)]),a("div",Qt,[d(N,{modelValue:e.value.price_unit,"onUpdate:modelValue":l[8]||(l[8]=s=>e.value.price_unit=s),options:{placeholder:t.$t("settings.localization.choose_price_unit")},class:"w-full"},{default:V(()=>[(o(!0),n(f,null,x(ne.value,(s,_)=>(o(),n("option",{value:s.value,key:_},r(t.$t(`settings.localization.priceOptions.${s.key}`)),9,Zt))),128))]),_:2},1032,["modelValue","options"])]),a("div",Wt,[a("div",Xt,r(t.$t("settings.localization.decimal_places")),1)]),a("div",ea,[d(N,{modelValue:e.value.decimal_places,"onUpdate:modelValue":l[9]||(l[9]=s=>e.value.decimal_places=s),options:{placeholder:t.$t("settings.localization.choose_decimal_places")},class:"w-full"},{default:V(()=>[(o(!0),n(f,null,x(re.value,(s,_)=>(o(),n("option",{value:s.value,key:_},r(s.text),9,ta))),128))]),_:2},1032,["modelValue","options"])])],2)):m=="logistics"?(o(),U(Be,{key:2,campaign:e.value,v:i(u),class:k(m)},null,8,["campaign","v","class"])):m=="payments"?(o(),U(Je,{key:3,campaign:e.value,directPaymentImages:B.value,v:i(u),class:k(m)},null,8,["campaign","directPaymentImages","v","class"])):m=="points"?(o(),n("div",{key:4,class:k([m,"box p-5 lg:mx-20 lg:px-40 mt-3 sm:p-8 text-sm sm:text-lg"])},[d(je,{meta_point:e.value.meta_point,v:i(u)},null,8,["meta_point","v"])],2)):m=="messages"?(o(),n("div",{key:5,class:k([m,"box p-5 lg:mx-20 lg:px-40 mt-3 sm:p-8 text-sm sm:text-lg"])},[d(Ke,{meta_reply:e.value.meta_reply,v:i(u)},null,8,["meta_reply","v"])],2)):m=="notes"?(o(),U(Le,{key:6,campaignNotes:$.value,class:k(m)},null,8,["campaignNotes","class"])):y("",!0)],64)}),128)),a("div",aa,[a("button",{class:"w-32 bg-white btn dark:border-darkmode-400",onClick:l[10]||(l[10]=m=>t.$router.push({name:"campaign-list"}))},r(t.$t("edit_campaign.cancel")),1),a("button",{class:"w-32 ml-5 mr-4 shadow-md btn btn-primary",onClick:l[11]||(l[11]=m=>ce())},r(t.$t("edit_campaign.update")),1)])])):y("",!0),d(Ue)],64)}}};var ra=pe(sa,[["__scopeId","data-v-1743e870"]]);export{ra as default};
