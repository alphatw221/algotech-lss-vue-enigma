import{_ as it,b as tt,u as et,a as st,a0 as ot,r as b,o as dt,a1 as _t,A as c,j as e,T as M,M as p,L as r,d as t,t as o,c as s,F as k,f as j,h as d,k as mt,l as pt,y as ut,a2 as wt,a3 as ft,e as u,s as xt,a4 as yt,Y as ht,g as T,i as Z}from"./lss.js";import{l as gt,a as kt,b as bt,c as vt}from"./campaign_lucky_draw_lss.js";const $t={class:"font-medium text-center text-xl w-full"},Dt={class:"table table-report table-auto -mt-3",style:{"text-align":"inherit"}},Ct={key:0,class:"imgtd w-20"},Mt={class:"flex w-full justify-around"},jt={class:"flex-0 w-20 h-20 sm:w-12 sm:h-12 zoom-in border-0"},Lt={key:2,class:"w-6 h-6 sm:w-5 sm:h-5 absolute right-0 bottom-0 rounded-full border-2 border-white dark:border-darkmode-600"},Pt=["src"],St=["src"],zt=["src"],Tt=["src"],It=["src"],Bt={key:1,class:"whitespace-nowrap w-fit"},Et={key:2,class:"break-all w-fit"},Wt={key:0},Rt={key:1},At={key:3,class:"break-all w-fit"},Ht={__name:"WinnersModal",setup(at){const w=tt(),x=et();st();const v=ot().appContext.config.globalProperties.eventBus,y="https://storage.googleapis.com/lss_bucket/static/",f=b([{key:"platform",name:"Platform"},{key:"customer_name",name:"Customer name"},{key:"draw_type",name:"Type"},{key:"prize",name:"Prize"}]),$=b([]),h=b(!1);return dt(()=>{v.on("showWinnersListModal",()=>{gt(x.params.campaign_id,w.alert).then(m=>{$.value=m.data}),h.value=!0})}),_t(()=>{v.off("showWinnersListModal")}),(m,g)=>{const D=c("XIcon"),L=c("ModalHeader"),C=c("Tippy"),P=c("ModalBody"),S=c("Modal");return e(),M(S,{backdrop:"static",size:"modal-lg",slideOver:!0,show:h.value,onHidden:g[1]||(g[1]=n=>h.value=!1)},{default:p(()=>[r(L,{class:"p-5"},{default:p(()=>[t("h2",$t,o(m.$t("lucky_draw.winner_modal.all_winner")),1),t("a",{onClick:g[0]||(g[0]=n=>h.value=!1),class:"absolute right-0 top-0 mt-3 mr-3"},[r(D,{class:"w-8 h-8 text-slate-400"})])]),_:1}),r(P,null,{default:p(()=>[t("table",Dt,[t("thead",null,[t("tr",null,[(e(!0),s(k,null,j(f.value,n=>(e(),s("th",{class:"whitespace-nowrap text-left",key:n.key},o(m.$t(`lucky_draw.winner_modal.${n.key}`)),1))),128))])]),t("tbody",null,[(e(!0),s(k,null,j($.value,n=>(e(),s("tr",{key:n},[n.draw_type?(e(!0),s(k,{key:0},j(f.value,_=>(e(),s(k,{key:_.key},[_.key=="platform"?(e(),s("td",Ct,[t("div",Mt,[t("div",jt,[n.customer_image==""||n.customer_image==null?(e(),M(C,{key:0,tag:"img",class:"rounded-full border-0 w-20",src:`${d(y)}fake_head.jpeg`},null,8,["src"])):(e(),M(C,{key:1,tag:"img",class:"rounded-full border-0 w-20 h-20 sm:w-12 sm:h-12",src:n.customer_image},null,8,["src"])),n.platform!=null?(e(),s("div",Lt,[n.platform=="facebook"?(e(),s("img",{key:0,class:"rounded-full bg-[#3c599b]",src:d(mt)},null,8,Pt)):n.platform=="instagram"?(e(),s("img",{key:1,class:"rounded-full bg-[#d63376]",src:d(pt)},null,8,St)):n.platform=="youtube"?(e(),s("img",{key:2,class:"rounded-full bg-[#f70000]",src:d(ut)},null,8,zt)):n.platform=="twitch"?(e(),s("img",{key:3,class:"rounded-full bg-[#6441a5]",src:d(wt)},null,8,Tt)):n.platform=="tiktok"?(e(),s("img",{key:4,class:"rounded-full bg-[#000000]",src:d(ft)},null,8,It)):u("",!0)])):u("",!0)])])])):_.key=="draw_type"?(e(),s("td",Bt,o(m.$t(`lucky_draw.draw_list.${n[_.key]}`)),1)):_.key=="customer_name"?(e(),s("td",Et,[n[_.key]!=""?(e(),s("div",Wt,o(n[_.key]),1)):(e(),s("div",Rt," Guest "))])):(e(),s("td",At,o(n[_.key]),1))],64))),128)):u("",!0)]))),128))])])]),_:1})]),_:1},8,["show"])}}};var Yt=it(Ht,[["__scopeId","data-v-1407563d"]]);const qt={key:0,class:"flex flex-col h-[100%] text-lg p-3 sm:px-10 sm:m-5 gap-3 sm:gap-0"},Ft={class:"flex flex-col sm:flex-row justify-between sm:mx-5 gap-3"},Nt={class:"text-center sm:text-left text-xl sm:text-2xl font-medium my-auto"},Ot=t("span",{class:"font-bold mr-1 text-[16px]"},"+",-1),Vt={class:"box sm:mx-5 sm:mt-3"},Ut={class:"m-3 sm:m-5"},Kt={class:"flex justify-between flex-col xl:flex-row gap-5 mb-10"},Xt={class:"flex justify-start font-medium"},Gt={class:"form-label mr-10 my-auto"},Jt={class:"w-42 my-auto"},Qt={class:"flex justify-end"},Zt={class:"flex flex-row flex-wrap justify-start lg:justify-between m-[0.7rem] p-5 px-3 xl:p-5 lucky-set"},te={class:"flex flex-col xl:flex-row justify-start w-[70px] md:w-[100px] lg:w-[200px] mr-5 md:mr-10 lg:mr-20 xl:mr-5 my-auto"},ee=["src"],se={class:"h-auto w-40 break-words text-[16px] hidden 2xl:block"},oe={class:"flex flex-col 2xl:flex-row flex-wrap justify-start xl:mt-5 w-[55%] xl:w-auto xl:ml-auto"},ae={class:"mb-2 md:my-auto lg:-mt-2 lg:mb-2 2xl:hidden break-words w-full"},le={class:"flex flex-col xl:flex-row flex-wrap"},ne={class:"xl:border-r-2 border-white flex flex-row xl:flex-col w-full xl:pr-5 xl:w-36 xl:w-44 text-sm xl:text-xl justify-between xl:justify-center text-right"},re={key:0,class:"text-slate-500 whitespace-wrap mr-auto xl:mr-0"},ce={key:1,class:"text-slate-500 whitespace-nowrap mr-auto xl:mr-0"},ie={key:2,class:"text-slate-500 order-1 whitespace-nowrap mr-0 hidden md:block"},de={class:"mr-auto xl:mr-0 xl:my-1"},_e={key:0,class:"text-[#E75F34]"},me={key:1,class:"text-[#E75F34]"},pe={class:"xl:border-r-2 border-white flex flex-row xl:flex-col w-full xl:px-5 xl:w-36 text-sm xl:text-xl justify-between xl:justify-center"},ue={class:"text-slate-500 mr-3"},we={class:"xl:my-1"},fe={class:"flex flex-row xl:flex-col w-full xl:w-44 xl:px-5 text-sm xl:text-xl justify-between xl:justify-center"},xe={class:"text-slate-500 mr-auto xl:mr-3 whitespace-nowrap"},ye={key:0,class:"xl:order-1 xl:my-1"},he={key:1,class:"xl:my-1"},ge={class:"mt-5 xl:mt-0 flex w-[100%] xl:w-fit ml-auto"},ke=["onClick"],be={key:1,class:"btn btn-secondary w-full xl:w-32 mt-auto h-[35px] sm:h-[42px] ml-auto",disabled:""},ve="like",$e="purchase",De="product",Ce="keyword",Le={__name:"LuckyDrawList",setup(at){const w=xt(),x=b([]),v=b(!1),y=et(),f=st(),{cookies:$}=yt(),h=ot().appContext.config.globalProperties.eventBus,m=tt();$.get("access_token");const g=b(!1);ht(()=>{kt(y.params.campaign_id,m.alert).then(a=>{x.value=a.data,x.value.length>0?v.value=!0:D()})});const D=()=>{f.push({name:"create-lucky-draw",params:{campaign_id:y.params.campaign_id}})},L=()=>{f.push({name:"manage-campaign-order",params:{campaign_id:y.params.campaign_id}})},C=a=>{let i=a.id;bt(i,m.alert).then(z=>{P(a)})},P=a=>{let i=f.resolve({name:"lucky-draw-flow",params:{lucky_draw_id:a.id},query:{language:Z.global.locale.value}});window.open(i.href,"_blank")},S=a=>{_(),f.push({name:"edit-lucky-draw",params:{campaign_id:y.params.campaign_id,lucky_draw_id:a.id}})},n=(a,i)=>{_(),confirm(`${Z.global.t("lucky_draw.draw_list.confirm_delete")}`)&&vt(a.id,m.alert).then(I=>{x.value.splice(i,1)})},_=()=>{dom(".dropdown-menu").removeClass("show")};return(a,i)=>{var W;const z=c("LoadingIcon"),I=c("MoreHorizontalIcon"),lt=c("DropdownToggle"),B=c("SimpleIcon"),E=c("DropdownItem"),nt=c("DropdownContent"),rt=c("DropdownMenu"),ct=c("Dropdown");return e(),s(k,null,[v.value?(e(),s("div",qt,[t("div",Ft,[t("h1",Nt,o(a.$t("lucky_draw.lucky_draw")),1),t("button",{class:"w-40 h-[35px] sm:h-[42px] text-white btn btn-warning btn-rounded mx-auto sm:mx-0 border-[2px] border-slate-100 shadow-lg",onClick:i[0]||(i[0]=l=>D())},[Ot,T(" "+o(a.$t("lucky_draw.draw_list.create")),1)])]),t("div",Vt,[t("div",Ut,[g.value?(e(),M(z,{key:0,icon:"three-dots",color:"black",class:"loading z-50 fixed h-[70px] w-[70px] top-0 bottom-0 right-[40%] my-auto"})):u("",!0),t("div",Kt,[t("div",Xt,[t("label",Gt,o(a.$t("lucky_draw.draw_list.campaign_title")),1),t("h2",Jt,o((W=d(w).campaign)==null?void 0:W.title),1)]),t("div",Qt,[t("button",{class:"btn btn-primary h-[35px] sm:h-[42px] my-auto mr-6 w-40",onClick:i[1]||(i[1]=l=>L())},o(a.$t("campaign_live.incoming.manage_order")),1),t("button",{class:"btn btn-primary w-32 mr-0 sm:mr-3 h-[35px] sm:h-[42px]",onClick:i[2]||(i[2]=l=>d(h).emit("showWinnersListModal"))},o(a.$t("lucky_draw.draw_list.all_winner")),1)])]),(e(!0),s(k,null,j(x.value,(l,R)=>{var A,H,Y,q,F,N,O,V,U,K,X,G,J;return e(),s("div",{key:R,class:"box bg-[#f1f1f1] relative text-left"},[t("div",Zt,[t("div",te,[t("img",{class:"h-[120px] object-cover xl:mr-5",src:(A=l.prize)==null?void 0:A.image},null,8,ee)]),t("span",se,o((H=l.prize)==null?void 0:H.name),1),t("div",oe,[t("span",ae,o((Y=l.prize)==null?void 0:Y.name),1),t("div",le,[t("div",ne,[t("div",null,[l.type==ve?(e(),s("span",re,o(a.$t(`lucky_draw.draw_list.${l.type}`)),1)):l.type==$e?(e(),s("span",ce,o(a.$t(`lucky_draw.draw_list.${l.type}`)),1)):(e(),s("span",ie,o(a.$t(`lucky_draw.draw_list.${l.type}`)),1))]),t("div",de,[l.type==De?(e(),s("span",_e," ("+o((q=l.campaign_product)==null?void 0:q.order_code)+") "+o((F=l.campaign_product)==null?void 0:F.name),1)):l.type==Ce?(e(),s("span",me,o(l.comment),1)):u("",!0)])]),t("div",pe,[t("div",ue,o(a.$t("lucky_draw.draw_list.winners")),1),t("span",we,o(l.num_of_winner),1)]),t("div",fe,[t("span",xe,o(a.$t("lucky_draw.draw_list.winner_repeat")),1),l.repeatable===!0?(e(),s("span",ye,o(a.$t("lucky_draw.draw_list.yes")),1)):u("",!0),l.repeatable===!1?(e(),s("span",he,o(a.$t("lucky_draw.draw_list.no")),1)):u("",!0)])])]),t("div",ge,[((O=d(w).campaignProductDict[(N=l.prize)==null?void 0:N.id.toString()])==null?void 0:O.qty_sold)+((U=d(w).campaignProductDict[(V=l.prize)==null?void 0:V.id.toString()])==null?void 0:U.qty_pending_payment)+((X=d(w).campaignProductDict[(K=l.prize)==null?void 0:K.id.toString()])==null?void 0:X.qty_add_to_cart)<((J=d(w).campaignProductDict[(G=l.prize)==null?void 0:G.id.toString()])==null?void 0:J.qty_for_sale)?(e(),s("button",{key:0,class:"btn btn-primary w-full xl:w-32 mt-auto h-[35px] sm:h-[42px] ml-auto",onClick:Q=>C(l)},o(a.$t("lucky_draw.draw_list.start")),9,ke)):(e(),s("button",be,o(a.$t("lucky_draw.draw_list.out_of_stock")),1))])]),r(ct,{class:"absolute top-2 right-2 w-8 h-8 rounded-full whitespace-nowrap hover:bg-white p-1"},{default:p(()=>[r(lt,null,{default:p(()=>[r(I,{class:"w-6 h-6"})]),_:1}),r(rt,{class:"w-30"},{default:p(()=>[r(nt,null,{default:p(()=>[r(E,{onClick:Q=>S(l),class:"w-24 text-center whitespace-nowrap text-[14px]"},{default:p(()=>[r(B,{icon:"edit",color:"#2d8cf0",class:"mr-1"}),T(" "+o(a.$t("lucky_draw.draw_list.edit")),1)]),_:2},1032,["onClick"]),r(E,{onClick:Q=>n(l,R),class:"w-24 text-center text-danger whitespace-nowrap text-[14px]"},{default:p(()=>[r(B,{icon:"delete",color:"#b91c1c",class:"mr-1"}),T(" "+o(a.$t("lucky_draw.draw_list.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}),128))])])])):u("",!0),r(Yt)],64)}}};export{Le as default};
