import{p as z,X as H,r as C,a0 as A,b as J,w as R,B as W,C as X,G as K,D as Q,x as Y,o as Z,a1 as ee,A as p,j as s,T as te,M as f,L as m,d as r,c as n,t as i,e as L,N,O as j,h as v,f as T,F as x,W as oe,i as D,g as O,aq as ae}from"./lss.js";const se=(g,l=null)=>z(l).post("/api/v2/product-category/create/",g),ne=(g,l,b=null)=>z(b).put(`/api/v2/product-category/${g}/update/`,l),re=(g,l=null)=>z(l).delete(`/api/v2/product-category/${g}/delete/`),G=H("CategoryManagement",{state:()=>({productCategories:C([]),showCreateEditModal:C(!1)})}),le={class:"mt-1"},ce={key:0,for:"regular-form-2",class:"form-label",style:{"font-size":"1.2rem"}},de={key:1,for:"regular-form-2",class:"form-label",style:{"font-size":"1.2rem"}},ie={class:"text-left"},ue=["placeholder"],me={class:"text-left"},pe=["placeholder"],_e={key:0,class:"mt-3 text-left"},ge=["onUpdate:modelValue"],ye={class:"w-full text-base"},ve={key:1,class:"text-left"},fe=["max","min","onUpdate:modelValue","onBlur"],be={class:"flex justify-between"},he={__name:"CreateEditModal",props:{modalType:String},setup(g){const l=g,b=A().appContext.config.globalProperties.eventBus,u=J(),B=G(),a=C({name:"",description:"",meta_logistic:{},meta:{}}),k=C({}),U=R(()=>({name:{required:W,maxLength:X(225)},meta_logistic:{flat_rate:{requiredIf:K(()=>{var e;return(e=a.value.meta_logistic)==null?void 0:e.enable_flat_rate}),decimal:Q}}})),c=Y(U,a),_=[{key:"enable_flat_rate",dataType:"boolean",default:!1,type:"checkbox"},{key:"flat_rate",dataType:"number",default:0,type:"input_number",max:999999999,min:0},{key:"is_free_delivery_for_order_above_price",dataType:"boolean",default:!1,type:"checkbox"},{key:"free_delivery_for_order_above_price",dataType:"number",default:1,type:"input_number",max:999999999,min:1}];Z(()=>{b.on("editProductCategory",e=>{k.value=JSON.parse(JSON.stringify(e)),a.value=k.value.product_category})}),ee(()=>{b.off("editCampaignProduct")});const y=()=>{if(c.value.$touch(),c.value.$invalid){u.alert.showMessageToast(D.global.t("error_messages.invalid_data"));return}se(a.value,u.alert).then(e=>{u.userInfo.user_subscription.product_categories.unshift(e.data),u.notification.showMessageToast(D.global.t("edit_campaign_product.edit_product_modal.update_successfully")),h()})},S=()=>{if(c.value.$touch(),c.value.$invalid){u.alert.showMessageToast(D.global.t("error_messages.invalid_data"));return}ne(a.value.id,a.value,u.alert).then(e=>{console.log(e.data),u.userInfo.user_subscription.product_categories[k.value.index]=e.data,u.notification.showMessageToast(D.global.t("edit_campaign_product.edit_product_modal.update_successfully")),h()})},h=()=>{a.value={name:"",description:"",meta_logistic:{},meta:{}},k.value={},c.value.$reset(),B.showCreateEditModal=!1};return(e,o)=>{const I=p("ModalBody"),q=p("Modal");return s(),te(q,{show:v(B).showCreateEditModal,onHidden:o[7]||(o[7]=M=>h()),backdrop:"static"},{default:f(()=>[m(I,{class:"p-10 text-center"},{default:f(()=>{var M,V;return[r("div",le,[l.modalType==="create"?(s(),n("label",ce,i(e.$t("stock.category_manage.create_new_category")),1)):l.modalType==="edit"?(s(),n("label",de,i(e.$t("stock.category_manage.edit")),1)):L("",!0),r("div",ie,[N(r("input",{id:"regular-form-2",type:"text",class:"mt-3 form-control",placeholder:e.$t("product_category.name"),"onUpdate:modelValue":o[0]||(o[0]=t=>a.value.name=t),onBlur:o[1]||(o[1]=t=>v(c).name.$touch())},null,40,ue),[[j,a.value.name]]),(s(!0),n(x,null,T((M=v(c).name)==null?void 0:M.$errors,(t,d)=>(s(),n("label",{class:"block text-danger text-[12px] mx-3",key:d},i(e.$t(`vulidate.${t.$validator}`)),1))),128))]),r("div",me,[N(r("textarea",{class:"mt-3 p-3 form-control",placeholder:e.$t("product_category.description"),"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.description=t),onBlur:o[3]||(o[3]=t=>{var d;return(d=v(c).description)==null?void 0:d.$touch()})},`
                        `,40,pe),[[j,a.value.description]]),(s(!0),n(x,null,T((V=v(c).description)==null?void 0:V.$errors,(t,d)=>(s(),n("label",{class:"block text-danger text-[12px] mx-3",key:d},i(e.$t(`vulidate.${t.$validator}`)),1))),128))]),(s(),n(x,null,T(_,(t,d)=>{var $,E;return s(),n(x,{key:d},[t.type=="checkbox"?(s(),n("div",_e,[N(r("input",{class:"form-control form-check-input w-[1.2rem] h-[1.2rem] mr-2",type:"checkbox","onUpdate:modelValue":w=>a.value.meta_logistic[t.key]=w},null,8,ge),[[oe,a.value.meta_logistic[t.key]]]),r("label",ye,i(e.$t(`product_category.meta_logistic.${t.key}`)),1)])):t.type=="input_number"?(s(),n("div",ve,[N(r("input",{class:"mt-1 form-control w-full",type:"number",max:t.max,min:t.min,"onUpdate:modelValue":w=>a.value.meta_logistic[t.key]=w,onBlur:w=>{var P,F;return(F=(P=v(c).meta_logistic)==null?void 0:P[t.key])==null?void 0:F.$touch()}},null,40,fe),[[j,a.value.meta_logistic[t.key]]]),(s(!0),n(x,null,T((E=($=v(c).meta_logistic)==null?void 0:$[t.key])==null?void 0:E.$errors,(w,P)=>(s(),n("label",{class:"block text-danger text-[12px]",key:P},i(e.$t(`vulidate.${w.$validator}`)),1))),128))])):L("",!0)],64)}),64))]),r("div",be,[r("button",{class:"w-32 btn dark:border-darkmode-400 mt-7",onClick:o[4]||(o[4]=t=>h())},i(e.$t("stock.category_manage.modal.cancel")),1),l.modalType==="create"?(s(),n("button",{key:0,class:"w-32 shadow-md btn btn-primary mt-7",onClick:o[5]||(o[5]=t=>y())},i(e.$t("stock.category_manage.modal.save")),1)):L("",!0),l.modalType==="edit"?(s(),n("button",{key:1,class:"w-32 shadow-md btn btn-primary mt-7",onClick:o[6]||(o[6]=t=>S())},i(e.$t("stock.category_manage.modal.save")),1)):L("",!0)])]}),_:1})]),_:1},8,["show"])}}},ke={class:"intro-y grid grid-cols-12 gap-3 sm:gap-6 mt-5 overflow-auto p-5 h-fit"},$e={class:"relative px-3 px-5 pt-6 pb-5 rounded-md file box sm:px-5 zoom-in"},we={class:"block mt-4 font-medium text-center truncate"},xe={class:"relative px-3 px-5 pt-8 pb-5 rounded-md file box sm:px-4"},Ce=r("div",{class:"w-1/2 mx-auto file__icon file__icon--empty-directory"},null,-1),Me={class:"block mt-4 font-medium text-center truncate"},Te={class:"text-[#B91D1D]"},Be={__name:"Main",setup(g){const l=J(),b=G(),u=C("create");C(!1);const B=A().appContext.config.globalProperties.eventBus,a=()=>{ae(".dropdown-menu").removeClass("show")},k=()=>{u.value="create",b.showCreateEditModal=!0},U=(_,y)=>{a(),u.value="edit",B.emit("editProductCategory",{product_category:_,index:y}),b.showCreateEditModal=!0},c=(_,y)=>{a(),confirm(`${D.global.t("stock.category_manage.confirm_delete")}`)&&re(_.id,l.alert).then(h=>{var e,o;(o=(e=l.userInfo.user_subscription)==null?void 0:e.product_categories)==null||o.splice(y,1)})};return(_,y)=>{const S=p("PlusSquareIcon"),h=p("MoreVerticalIcon"),e=p("DropdownToggle"),o=p("EditIcon"),I=p("DropdownItem"),q=p("Trash2Icon"),M=p("DropdownContent"),V=p("DropdownMenu"),t=p("Dropdown");return s(),n("div",ke,[r("div",{class:"col-span-6 intro-y sm:col-span-4 md:col-span-3 2xl:col-span-2",onClick:y[0]||(y[0]=d=>k())},[r("div",$e,[m(S,{style:{margin:"auto",width:"7rem",height:"7rem"}}),r("div",we,i(_.$t("stock.category_manage.create_new_category")),1)])]),(s(!0),n(x,null,T(v(l).userInfo.user_subscription.product_categories,(d,$)=>(s(),n("div",{key:$,class:"col-span-6 intro-y sm:col-span-4 md:col-span-3 2xl:col-span-2"},[r("div",xe,[Ce,r("div",Me,i(d.name),1),m(t,{class:"absolute top-0 right-0 mt-3 ml-auto mr-2"},{default:f(()=>[m(e,{tag:"a",class:"block w-5 h-5",href:"javascript:;"},{default:f(()=>[m(h,{class:"w-5 h-5 text-slate-500"})]),_:1}),m(V,{class:"w-40"},{default:f(()=>[m(M,null,{default:f(()=>[m(I,{onClick:E=>{U(d,$),_.modalTitle="edit_title"}},{default:f(()=>[m(o,{class:"w-4 h-4 mr-2"}),O(" "+i(_.$t("stock.category_manage.edit")),1)]),_:2},1032,["onClick"]),m(I,{onClick:E=>c(d,$)},{default:f(()=>[m(q,{class:"w-4 h-4 mr-2 text-[#B91D1D]"}),O(),r("span",Te,i(_.$t("stock.category_manage.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128)),m(he,{modalType:u.value},null,8,["modalType"])])}}};export{Be as default};
