import{_ as B,b7 as $,u as I,a as O,r as i,o as x,A as j,j as a,c as s,d as r,T as D,e as v,F as l,f,t as n,g as _,L as w,be as H,bf as N,a4 as V,a0 as M,w as A,h as F}from"./lss.js";import{L as R}from"./LoadingTable_lss2.js";const E={class:"overflow-x-auto h-fit sm:h-full"},G={key:1,class:"table table-report mt-2 table-auto"},q=["data-content"],J=["onClick"],K={class:"md:hidden"},Q={class:"hidden md:inline"},U={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},W={__name:"OrderHistoryTable",setup(C){const d=$();I();const c=O(),u=i(!1),y=i(1);i(1);const p=i(10),h=i(0),k=i([]),g=i([{name:"order_no",key:"id",type:"int"},{name:"date",key:"created_at",type:"dateTime"},{name:"payment_method",key:"payment_method",type:"string"},{name:"amount",key:"total",type:"float"},{name:"status",key:"status",type:"string"},{name:"action",key:"action",type:"link"}]),L=e=>{H(e,d.alert).then(b=>{c.push({name:"buyer-order-detail-page",params:{order_oid:b.data}})})},S=e=>{y.value=e,m()},T=e=>{e.value=e,m()},m=()=>{u.value=!1,N(y.value,p.value,null,d.alert).then(e=>{h.value=e.data.count,k.value=e.data.results,u.value=!0})};return x(()=>{m()}),(e,b)=>{const P=j("Page");return a(),s(l,null,[r("div",E,[u.value==!1?(a(),D(R,{key:0,column:g.value,tableName:"order_history"},null,8,["column"])):v("",!0),u.value==!0?(a(),s("table",G,[r("thead",null,[r("tr",null,[(a(!0),s(l,null,f(g.value,t=>(a(),s("th",{class:"whitespace-nowrap",key:t.key},n(e.$t("order_history.table."+t.name)),1))),128))])]),r("tbody",null,[(a(!0),s(l,null,f(k.value,(t,z)=>(a(),s("tr",{class:"intro-x",style:{"line-height":"30px"},key:z},[(a(!0),s(l,null,f(g.value,o=>(a(),s("td",{class:"w-12 text-[12px] lg:w-18 lg:text-sm 2xl:w-32 2xl:text-sm",key:o.key,"data-content":e.$t("order_history.table."+o.name)},[o.key==="action"?(a(),s("a",{key:0,onClick:ne=>L(t.id)},[r("u",K,n(e.$t("order_history.table.view")),1),r("u",Q,n(e.$t("order_history.table.view")),1)],8,J)):o.type=="dateTime"?(a(),s(l,{key:1},[_(n(new Date(t[o.key]).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"})),1)],64)):o.key=="total"?(a(),s(l,{key:2},[_(n(t.currency)+" "+n((Math.floor(t[o.key]*10**t.decimal_places)/10**t.decimal_places).toLocaleString("en-GB"))+" "+n(t.price_unit?e.$t(`global.price_unit.${t.price_unit}`):""),1)],64)):o.key=="payment_method"&&t[o.key]?(a(),s(l,{key:3},[_(n(t[o.key]=="direct_payment"?`${e.$t("order_history.direct_payment")} - ${t.meta.account_mode}`:e.$t(`order_history.${t[o.key]}`)),1)],64)):o.key=="status"?(a(),s(l,{key:4},[_(n(e.$t(`order_history.${t[o.key]}`)),1)],64)):(a(),s(l,{key:5},[_(n(t[o.key]),1)],64))],8,q))),128))]))),128))])])):v("",!0)]),r("div",U,[w(P,{class:"mx-auto my-3",total:h.value,"page-size":p.value,onOnChange:S,onOnPageSizeChange:T},null,8,["total","page-size"])])],64)}}};var X=B(W,[["__scopeId","data-v-7341b751"]]);const Y={class:"box grid grid-cols-12 gap-5 my-5 p-2 py-5 lg:m-5 lg:p-10 min-h-[90%] content-start"},Z={class:"text-xl col-span-12 justify-self-center",style:{"font-size":"1.5rem"}},ee={class:"col-span-12 justify-self-center lg:col-span-3"},te={class:"h-48 w-44 box border-2 border-slate-200 flex flex-col items-center justify-center gap-0.5"},ae={class:"w-28 h-28 flex-none image-fit mr-1"},se=["src"],oe={class:"text-lg"},re={for:"orderHistoryTable",class:"box border-2 border-slate-200 col-start-1 col-span-12 lg:col-start-4 lg:col-span-9"},ce={__name:"Main",setup(C){const{cookies:d}=V(),c=$(),u=M().appContext.config.globalProperties.$i18n,y=A(()=>d.get("login_with")=="facebook"?c.userInfo.facebook_info.picture:d.get("login_with")=="google"?c.userInfo.google_info.picture:"https://storage.googleapis.com/lss_public_bucket/static/fake_head.jpeg");return x(()=>{u.locale=c.userInfo.lang}),(p,h)=>(a(),s("div",Y,[r("h1",Z,n(p.$t("order_history.order_history")),1),r("div",ee,[r("div",te,[r("div",ae,[r("img",{alt:"",class:"rounded-full zoom-in",src:y.value},null,8,se)]),r("div",oe,n(F(c).userInfo.name),1)])]),r("div",re,[w(X)])]))}};export{ce as default};
