import{X as P,b as j,r as A,Y as E,o as N,z as R,w as L,A as x,j as l,c as p,t as n,d as e,e as $,F as m,f as T,N as r,Z as M,$ as O,g as D,S as H,L as _,M as v,O as b,h as f,n as B,T as X,W as F}from"./lss.js";const Y=P("pointsMeta",{state:()=>({default:{name:"lss",fields:[{key:"enable",type:"input",input_type:"checkbox",datatype:"boolean",default:!1},{key:"point_validity",type:"component",input_type:"number",datatype:"number",default:0},{key:"default_point_redemption_rate",type:"component",datatype:"number",default:1},{key:"reward_table",type:"component",datatype:"object",default:[],template:{fields:[{key:"upper_bound",type:"input",dataType:"number",default:1},{key:"point_redemption_rate",type:"input",dataType:"number",default:1}]}},{key:"redemption_rate_point",type:"component",datatype:"number",default:1},{key:"redemption_rate_cash",type:"component",datatype:"number",default:1},{key:"description",type:"textarea",datatype:"string",default:"",placeholder:"..."}]},617:{name:"shc",fields:[{key:"enable",type:"input",input_type:"checkbox",datatype:"boolean",default:!1},{key:"point_validity",type:"input",input_type:"number",datatype:"number",default:0},{key:"default_point_redemption_rate",type:"component",datatype:"number",default:1},{key:"reward_table",type:"component",datatype:"object",default:[],template:{fields:[{key:"upper_bound",type:"input",dataType:"number",default:1},{key:"point_redemption_rate",type:"input",dataType:"number",default:1}]}},{key:"redemption_rate_point",type:"component",datatype:"number",default:1},{key:"redemption_rate_cash",type:"component",datatype:"number",default:1},{key:"description",type:"textarea",datatype:"string",default:"",placeholder:"..."}]}})}),z={key:0,class:"w-72 text-xl"},G={key:1,class:"flex flex-col gap-4"},Z={class:"text-xl font-medium leading-none lg:-mx-6 whitespace-nowrap w-60"},J=e("hr",{class:"-mx-6"},null,-1),K={class:"flex flex-col gap-8 w-full"},W={key:0},q=["type","onUpdate:modelValue"],Q={class:"w-fit whitespace-nowrap form-label text-base font-medium mr-3"},ee={key:1,class:"flex flex-col gap-2"},te={class:"w-fit whitespace-nowrap form-label text-base"},oe={class:"flex flex-col sm:flex-row gap-2 sm:gap-5 text-[16px]"},ae={class:"radio-inline my-auto"},se={class:"radio-inline my-auto flex flex-row gap-2 items-center"},ne=["type","onUpdate:modelValue"],le={class:""},pe={key:2,class:"flex flex-row md:flex-col w-full justify-between md:gap-1"},ie={class:"w-fit whitespace-nowrap form-label text-base font-medium my-auto"},re=["type","onUpdate:modelValue"],de={key:3,class:"flex flex-row md:flex-col w-full justify-between md:gap-1"},ue={class:"w-fit whitespace-nowrap form-label text-base font-medium my-auto"},ce=["onUpdate:modelValue"],me=["value"],_e=["value"],ye={key:4},fe={class:"w-fit whitespace-nowrap form-label text-base font-medium"},be=["onUpdate:modelValue"],xe={key:5,class:"flex flex-col gap-3"},we={key:0,class:"flex flex-row justify-between"},he={class:"w-fit whitespace-nowrap form-label text-base font-medium my-auto"},ke={class:"flex-1 gap-2 flex"},ge=e("input",{class:"w-16 md:w-32 form-control flex-1",type:"number",value:1,disabled:""},null,-1),ve={class:"w-fit whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},$e=["onUpdate:modelValue"],Ve={class:"form-label text-base my-auto text-[14px] md:text-[16px]"},Ue={class:"flex-1 gap-2 flex"},Te={class:"w-fit whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},Se=e("input",{class:"w-20 md:w-32 form-control flex-1",type:"text",value:0,disabled:""},null,-1),Ie={class:"w-fit whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},Me=["onUpdate:modelValue"],Ae={class:"w-fit whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},Le=["onUpdate:modelValue"],Ce=["onClick"],Oe={class:"flex flex-row flex-wrap gap-3 mt-5 sm:flex-row sm:mt-0"},Pe={class:"flex-1 gap-2 flex"},je=e("input",{class:"w-16 md:w-32 form-control flex-1",type:"number",value:1,disabled:""},null,-1),Ee={class:"w-fit whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},Ne={class:"form-label text-base my-auto text-[14px] md:text-[16px]"},Re={class:"flex-1 gap-2 flex"},Be={class:"w-fit whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},De=["onUpdate:modelValue"],He={class:"w-fit whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},Xe=e("input",{class:"w-20 md:w-32 form-control flex-1",type:"number",value:0,disabled:""},null,-1),Fe={class:"w-fit whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},Ye=e("input",{class:"w-20 md:w-32 form-control flex-1",type:"text",value:"above",disabled:""},null,-1),ze={class:"flex-0 hidden 2xl:inline-block w-full h-[42px] ml-auto text-base btn-white sm:rounded-lg sm:w-24 text-white cursor-default"},Ge={key:6,class:"flex flex-col"},Ze={class:"w-fit whitespace-nowrap form-label text-base font-medium mt-3"},Je={class:"flex flex-row gap-3 max-w-lg"},Ke={class:"flex flex-1 flex-row gap-3"},We=["onUpdate:modelValue"],qe={class:"w-fit flex-0 whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},Qe={class:"flex flex-1 flex-row gap-3"},et={class:"w-fit flex-0 whitespace-nowrap form-label text-base my-auto text-[14px] md:text-[16px]"},ft={__name:"PointsSettings",props:{meta_point:Object,status:String},setup(S){const t=S,c=j(),y=Y(),w=A({fields:[]});E(()=>{y!=null&&y[c.userInfo.user_subscription.id.toString()]?w.value=y[c.userInfo.user_subscription.id.toString()]:w.value=y.default}),N(()=>{u()}),R(L(()=>t.meta_point),()=>{u()});const u=()=>{w.value.fields.forEach(s=>{typeof t.meta_point[s.key]!=s.datatype&&(t.meta_point[s.key]=s.default)})},C=()=>{var k,i,o,a;var s=t.meta_point.default_point_redemption_rate,d=0;((k=t.meta_point)==null?void 0:k.reward_table.length)>0&&(d=((a=(i=t.meta_point)==null?void 0:i.reward_table)==null?void 0:a[((o=t.meta_point)==null?void 0:o.reward_table.length)-1].upper_bound)+1);const V={upper_bound:d,point_redemption_rate:s};t.meta_point.reward_table.push(V)},I=s=>{t.meta_point.reward_table.splice(s,1)},h=L({get:()=>{var s;return((s=t.meta_point)==null?void 0:s.point_validity)==0?"disable":"enable"},set:s=>{s=="enable"?(console.log("enable"),t.meta_point.point_validity=1):s=="disable"&&(console.log("disable"),t.meta_point.point_validity=0)}});return(s,d)=>{const V=x("HelpCircleIcon"),k=x("Tippy"),i=x("ChevronsRightIcon");return l(),p("div",{class:B(["flex flex-col justify-between gap-5 my-5",{"md:flex-row":t.status=="settings"}])},[t.status=="settings"?(l(),p("label",z,n(s.$t("settings.points.title")),1)):t.status!=="settings"?(l(),p("div",G,[e("span",Z,n(s.$t("settings.points.title")),1),J])):$("",!0),e("div",K,[(l(!0),p(m,null,T(w.value.fields,o=>(l(),p(m,{key:o.key},[o.type==="input"&&o.input_type==="checkbox"?(l(),p("div",W,[r(e("input",{class:"form-control form-check-input w-[1.5rem] h-[1.5rem] mr-2",type:o.input_type,"onUpdate:modelValue":a=>t.meta_point[o.key]=a},null,8,q),[[M,t.meta_point[o.key]]]),e("label",Q,n(s.$t("settings.points."+o.key)),1)])):o.key=="point_validity"?(l(),p("div",ee,[e("label",te,n(s.$t("settings.points."+o.key)),1),e("form",oe,[e("label",ae,[r(e("input",{class:"mr-2",type:"radio",name:"pointValidity",value:"disable","onUpdate:modelValue":d[0]||(d[0]=a=>h.value=a)},null,512),[[O,h.value]]),D(" "+n(s.$t("settings.points.unlimited")),1)]),e("label",se,[r(e("input",{type:"radio",name:"pointValidity",value:"enable","onUpdate:modelValue":d[1]||(d[1]=a=>h.value=a)},null,512),[[O,h.value]]),r(e("input",{class:"w-24 md:w-14 h-fit form-control",type:o.input_type,"onUpdate:modelValue":a=>t.meta_point[o.key]=a},null,8,ne),[[M,t.meta_point[o.key]]]),e("span",le,n(s.$t("settings.points.month")),1)])])])):o.type==="input"?(l(),p("div",pe,[e("label",ie,n(s.$t("settings.points."+o.key)),1),r(e("input",{class:"w-20 md:w-32 form-control flex-2",type:o.input_type,"onUpdate:modelValue":a=>t.meta_point[o.key]=a},null,8,re),[[M,t.meta_point[o.key]]])])):o.type==="select"?(l(),p("div",de,[e("label",ue,n(s.$t("settings.points."+o.key)),1),r(e("select",{class:"rounded-lg form-select sm:form-select-lg w-32 md:w-60","onUpdate:modelValue":a=>t.meta_point[o.key]=a},[(l(!0),p(m,null,T(o.options,a=>(l(),p(m,{key:a.key},[a.key=="unlimited"?(l(),p("option",{key:0,value:a.value},n(s.$t("settings.points."+a.key)),9,me)):(l(),p("option",{key:1,value:a.value},n(a.key),9,_e))],64))),128))],8,ce),[[H,t.meta_point[o.key]]])])):o.type==="textarea"?(l(),p("div",ye,[e("label",fe,n(s.$t("settings.points.description")),1),_(k,{class:"rounded-full w-50 my-auto ml-1","data-tippy-allowHTML":"true","data-tippy-placement":"right",content:s.$t("tooltips.settings.points.points_des"),theme:"light"},{default:v(()=>[_(V,{class:"inline-block w-5 -mt-1 tippy-icon"})]),_:1},8,["content"]),r(e("textarea",{class:"h-48 p-5 mr-5 form-control","onUpdate:modelValue":a=>t.meta_point[o.key]=a},`
                        `,8,be),[[b,t.meta_point[o.key]]])])):o.key=="reward_table"?(l(),p("div",xe,[o.key=="reward_table"?(l(),p("div",we,[e("label",he,n(s.$t("settings.points.reward_table")),1),e("button",{class:"btn btn-primary w-32 h-[35px]",onClick:d[2]||(d[2]=a=>C())},n(s.$t("settings.points.add")),1)])):$("",!0),(l(!0),p(m,null,T(t.meta_point[o.key],(a,U)=>(l(),p("div",{class:"flex flex-row flex-wrap gap-3 sm:gap-2 mt-5 sm:flex-row sm:mt-0",key:U},[e("div",ke,[ge,e("label",ve,n(f(c).userInfo.user_subscription.currency),1),_(i,{class:"my-auto"}),r(e("input",{class:"w-16 md:w-32 form-control flex-1",type:"number","onUpdate:modelValue":g=>a.point_redemption_rate=g},null,8,$e),[[b,a.point_redemption_rate]]),e("label",Ve,n(s.$t("settings.points.points")),1)]),e("div",Ue,[U==0?(l(),p(m,{key:0},[e("label",Te,"\u2014\u3000"+n(f(c).userInfo.user_subscription.currency),1),Se],64)):(l(),p(m,{key:1},[e("label",Ie,"\u2014\u3000"+n(f(c).userInfo.user_subscription.currency),1),r(e("input",{class:"w-20 md:w-32 form-control flex-1",type:"number","onUpdate:modelValue":g=>t.meta_point[o.key][U-1].upper_bound=g},null,8,Me),[[b,t.meta_point[o.key][U-1].upper_bound]])],64)),e("label",Ae," ~ "+n(f(c).userInfo.user_subscription.currency),1),r(e("input",{class:"w-20 md:w-32 form-control flex-1",type:"number","onUpdate:modelValue":g=>a.upper_bound=g},null,8,Le),[[b,a.upper_bound]])]),e("button",{class:"flex-0 inline-block w-full h-[42px] ml-auto text-base btn btn-danger sm:rounded-lg sm:w-24",onClick:g=>I(U)},n(s.$t("settings.delivery_form.delete")),9,Ce)]))),128)),e("div",Oe,[e("div",Pe,[je,e("label",Ee,n(f(c).userInfo.user_subscription.currency),1),_(i,{class:"my-auto"}),r(e("input",{class:"w-16 md:w-32 form-control flex-1",type:"number","onUpdate:modelValue":d[3]||(d[3]=a=>t.meta_point.default_point_redemption_rate=a)},null,512),[[b,t.meta_point.default_point_redemption_rate]]),e("label",Ne,n(s.$t("settings.points.points")),1)]),e("div",Re,[(t.meta_point[o.key]||[]).length?(l(),p(m,{key:0},[e("label",Be,"\u2014\u3000"+n(f(c).userInfo.user_subscription.currency),1),r(e("input",{class:"w-20 md:w-32 form-control flex-1",type:"number","onUpdate:modelValue":a=>t.meta_point[o.key][t.meta_point[o.key].length-1].upper_bound=a},null,8,De),[[b,t.meta_point[o.key][t.meta_point[o.key].length-1].upper_bound]])],64)):(l(),p(m,{key:1},[e("label",He,"\u2014\u3000"+n(f(c).userInfo.user_subscription.currency),1),Xe],64)),e("label",Fe," ~ "+n(f(c).userInfo.user_subscription.currency),1),Ye]),e("button",ze,n(s.$t("settings.delivery_form.delete")),1)])])):o.key=="redemption_rate_point"?(l(),p("div",Ge,[e("label",Ze,n(s.$t("settings.points.redemption")),1),e("div",Je,[e("div",Ke,[r(e("input",{class:"w-14 md:w-32 form-control flex-1",type:"number","onUpdate:modelValue":a=>t.meta_point[o.key]=a},null,8,We),[[b,t.meta_point[o.key]]]),e("label",qe,n(s.$t("settings.points.points")),1)]),_(i,{class:"my-auto flex-0 w-8"}),e("div",Qe,[e("label",et,n(f(c).userInfo.user_subscription.currency),1),r(e("input",{class:"w-14 md:w-32 form-control flex-1",type:"number","onUpdate:modelValue":d[4]||(d[4]=a=>t.meta_point.redemption_rate_cash=a)},null,512),[[b,t.meta_point.redemption_rate_cash]])])])])):$("",!0)],64))),128))])],2)}}},tt=P("replyMeta",{state:()=>({default:{name:"lss",fields:[{key:"added_enabled",type:"input",datatype:"boolean",default:!1},{key:"added",type:"textarea",datatype:"string",default:""},{key:"updated_enabled",type:"input",datatype:"boolean",default:!1},{key:"updated",type:"textarea",datatype:"string",default:""},{key:"deleted_enabled",type:"input",datatype:"boolean",default:!1},{key:"deleted",type:"textarea",datatype:"string",default:""},{key:"insufficient_inv_enabled",type:"input",datatype:"boolean",default:!1},{key:"insufficient_inv",type:"textarea",datatype:"string",default:""},{key:"facebook_buttons_enabled",type:"input",datatype:"boolean",default:!1},{key:"facebook_buttons",type:"component",datatype:"object",default:[],buttons:[{key:"payload_button",type:"postback",title:"",payload:""},{key:"URL_button",type:"web_url",url:"<URL_TO_OPEN>",title:"<BUTTON_TEXT>",fallback_url:"<URL_TO_FALLBACK_TO>"},{key:"call_button",type:"phone_number",title:"<BUTTON_TEXT>",payload:"<PHONE_NUMBER>"},{key:"game_button",type:"game_play",title:"Play",payload:"{<SERIALIZED_JSON_PAYLOAD>}",game_metadata:{player_id:"<PLAYER_ID>",context_id:"<CONTEXT_ID>"}}]}]}})}),ot={key:0,class:"w-72 text-xl"},at={key:1,class:"flex flex-col gap-4"},st={class:"text-xl font-medium leading-none lg:-mx-6 whitespace-nowrap"},nt=e("hr",{class:"-mx-6"},null,-1),lt={class:"flex flex-col"},pt={class:"flex flex-row gap-2 justify-start"},it={class:"form-label text-base font-medium"},rt={class:"ml-auto"},dt={key:0},ut=["onUpdate:modelValue"],ct={class:"w-fit whitespace-nowrap form-label text-base font-medium mr-3"},mt={class:"text-slate-400 break-all w-full whitespace-pre-line"},_t=["placeholder","onUpdate:modelValue"],bt={__name:"MessageSettings",props:{meta_reply:Object,status:String},setup(S){const t=S;j();const c=tt(),y=A({fields:[]});A([]),E(()=>{y.value=c.default}),N(()=>{w()}),R(L(()=>t.meta_reply),()=>{w()},{deep:!0});const w=()=>{y.value.fields.forEach(u=>{typeof t.meta_reply[u.key]!=u.datatype&&(t.meta_reply[u.key]=u.default)})};return(u,C)=>{const I=x("SimpleIcon"),h=x("Tippy"),s=x("Accordion"),d=x("AccordionPanel"),V=x("AccordionItem"),k=x("AccordionGroup");return l(),p("div",{class:B(["flex flex-col justify-between gap-5 my-5",{"md:flex-row":t.status=="settings"}])},[t.status=="settings"?(l(),p("label",ot,n(u.$t("settings.messages.title")),1)):t.status!=="settings"?(l(),p("div",at,[e("span",st,n(u.$t("settings.messages.title")),1),nt])):$("",!0),_(k,{class:"accordion-boxed w-full"},{default:v(()=>[(l(!0),p(m,null,T(y.value.fields,i=>(l(),p(m,{key:i.key},[i.type==="textarea"?(l(),X(V,{key:0},{default:v(()=>[_(s,null,{default:v(()=>[e("div",lt,[e("div",pt,[e("label",it,n(u.$t("settings.messages."+i.key)),1),e("div",rt,[_(h,{content:u.$t("settings.notes.modify"),options:{theme:"light"}},{default:v(()=>[_(I,{icon:"edit",color:"#334155"})]),_:1},8,["content"])])]),i.status!=="settings"?(l(),p("div",dt,[r(e("input",{class:"form-control form-check-input w-[1.2rem] h-[1.2rem] mr-2",type:"checkbox","onUpdate:modelValue":o=>t.meta_reply[i.key+"_enabled"]=o},null,8,ut),[[F,t.meta_reply[i.key+"_enabled"]]]),e("label",ct,n(u.$t("settings.messages.enable")),1)])):$("",!0),e("p",mt,n(t.meta_reply[i.key]),1)])]),_:2},1024),_(d,{class:"leading-relaxed text-slate-600 dark:text-slate-500"},{default:v(()=>[r(e("textarea",{rows:"8",cols:"40",class:"h-48 p-2 mr-5 form-control",placeholder:u.$t("settings.messages.placeholder."+i.key),"onUpdate:modelValue":o=>t.meta_reply[i.key]=o},`
                        `,8,_t),[[b,t.meta_reply[i.key]]])]),_:2},1024)]),_:2},1024)):$("",!0)],64))),128))]),_:1})],2)}}};export{ft as _,bt as a};
