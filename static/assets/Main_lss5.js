import{b as L,w as K,r as j,o as B,ak as ie,A as S,j as t,c as s,F as f,f as I,d as e,t as o,L as g,M as w,e as D,g as J,N as T,O as M,al as ue,i as A,u as Q,a as Z,am as G,I as ee,B as N,x as F,W as O,h as C,R as ce,an as ne,v as de,T as z,X as _e,D as me,E as pe,J as X,S as te,ao as q,z as Y,P as se,Q as le,Z as oe,G as ae,_ as ye,n as W,$ as fe}from"./lss.js";import{_ as ve,a as ge}from"./MessageSettings_lss.js";const he={class:"py-5 sm:p-8 sm:py-5 px-2 lg:px-10 text-sm sm:text-lg"},be={key:0,class:"flex flex-col md:flex-row justify-between gap-5 my-5"},$e={class:"w-72 text-xl"},ke={class:"flex flex-col gap-5 w-full"},xe={class:"flex form-label text-base font-medium"},we=["value"],Te={class:"flex text-base font-medium"},Ve={class:"my-auto w-32"},Ie=["value"],Ue={class:"flex form-label text-base font-medium"},Se={class:"my-auto w-32"},Ce=["value"],De={class:"flex form-label text-base font-medium"},je=["value"],Me=e("div",{class:"w-full border-t border-slate-300/60 dark:border-darkmode-400 my-10"},null,-1),Pe=e("div",{class:"w-full border-t border-slate-300/60 dark:border-darkmode-400 my-10"},null,-1),Oe=e("div",{class:"w-full border-t border-slate-300/60 dark:border-darkmode-400 my-10"},null,-1),Ee={class:"flex flex-col md:flex-row justify-between gap-5 my-5"},ze={class:"w-72 text-xl"},Re={class:"flex"},Ae={class:"mr-auto"},He={class:"form-label text-base font-medium"},Ne=e("br",null,null,-1),Le={class:"text-slate-400 break-all"},Be=["placeholder"],Ke={class:"flex"},Ge={class:"mr-auto"},Fe={class:"form-label text-base font-medium"},qe=e("br",null,null,-1),Je={class:"whitespace-normal text-slate-400 break-all"},We=["placeholder"],Xe={class:"flex"},Ye={class:"mr-auto"},Qe={class:"form-label text-base font-medium"},Ze=e("br",null,null,-1),et={class:"text-slate-400 break-all"},tt=["placeholder"],st={class:"mt-5 flex text-[14px] justify-end"},lt={__name:"NotesSettings",setup(P){const h=L(),i=K(()=>{var m,a;var n=[{name:"shoppingCart"},{name:"points"},{name:"messages"},{name:"notes"}];return((a=(m=h.userInfo)==null?void 0:m.user_subscription)==null?void 0:a.type)==="kol"&&(n=n.filter(u=>u.name!="points")),n});j({PH:"Philippines",SG:"Singapore",ID:"Indonesia",IN:"India",TW:"Taiwan"});const l=j([{value:"USD",text:"USD"},{value:"NTD",text:"NTD"},{value:"SGD",text:"SGD"},{value:"IDR",text:"IDR"},{value:"PHP",text:"PHP"},{value:"MYR",text:"MYR"},{value:"VND",text:"VND"},{value:"RMB",text:"RMB"},{value:"KHR",text:"KHR"},{value:"AUD",text:"AUD"},{value:"HKD",text:"HKD"}]),b=j([{key:"1",value:"1"},{key:"1000",value:"1000"},{key:"1000000",value:"1000000"}]),_=j([{value:"en",text:"English"},{value:"zh_hans",text:"Chinese-simplify"},{value:"zh_hant",text:"Chinese-tranditional"},{value:"vi",text:"Vietnamese"}]),U=j([{value:"2",text:"0.01"},{value:"0",text:"1"}]),r=j({currency:"USD",lang:"en",buyer_lang:"en",decimal_places:"0",price_unit:"1",confirmation_note:"",delivery_note:"",special_note:"",meta_point:{},meta_reply:{}});B(()=>{ie(h.alert).then(n=>{r.value=n.data,r.value.decimal_places=n.data.decimal_places.toString()})});const c=()=>{console.log(r.value),ue(r.value,h.alert).then(n=>{h.userInfo=n.data,document.querySelector("#lss-content").scrollTo(0,-70),h.notification.showMessageToast(A.global.t("settings.update_successfully"))})};return(n,m)=>{const a=S("TomSelect"),u=S("HelpCircleIcon"),d=S("Tippy"),p=S("SimpleIcon"),V=S("Accordion"),$=S("AccordionPanel"),v=S("AccordionItem"),y=S("AccordionGroup");return t(),s("div",he,[(t(!0),s(f,null,I(i.value,(x,E)=>(t(),s(f,{key:E},[x.name=="shoppingCart"?(t(),s("div",be,[e("label",$e,o(n.$t("settings.localization.title")),1),e("div",ke,[e("div",xe,o(n.$t("settings.localization.currency_symbol")),1),g(a,{modelValue:r.value.currency,"onUpdate:modelValue":m[0]||(m[0]=k=>r.value.currency=k),options:{placeholder:n.$t("settings.localization.choose_currency_symbol")},class:"w-full -mt-5"},{default:w(()=>[(t(!0),s(f,null,I(l.value,(k,H)=>(t(),s("option",{value:k.value,key:H},o(k.text),9,we))),128))]),_:2},1032,["modelValue","options"]),e("div",Te,[e("div",Ve,o(n.$t("settings.localization.buyer_language")),1),g(d,{class:"rounded-full w-30 whitespace-wrap","data-tippy-allowHTML":"true","data-tippy-placement":"right",content:n.$t("tooltips.settings.local.buyer_lang"),theme:"light"},{default:w(()=>[g(u,{class:"h-5 ml-1 mt-0.5 tippy-icon"})]),_:1},8,["content"])]),g(a,{modelValue:r.value.buyer_lang,"onUpdate:modelValue":m[1]||(m[1]=k=>r.value.buyer_lang=k),options:{placeholder:n.$t("settings.localization.choose_language")},class:"w-full -mt-5"},{default:w(()=>[(t(!0),s(f,null,I(_.value,(k,H)=>(t(),s("option",{value:k.value,key:H},o(n.$t(`settings.localization.languages.${k.value}`)),9,Ie))),128))]),_:2},1032,["modelValue","options"]),e("div",Ue,[e("div",Se,o(n.$t("settings.localization.price_unit")),1),g(d,{class:"rounded-full whitespace-wrap","data-tippy-allowHTML":"true","data-tippy-placement":"right",content:n.$t("tooltips.settings.local.price_unit")},{default:w(()=>[g(u,{class:"h-5 ml-1 mt-0.5 tippy-icon"})]),_:1},8,["content"])]),g(a,{modelValue:r.value.price_unit,"onUpdate:modelValue":m[2]||(m[2]=k=>r.value.price_unit=k),options:{placeholder:n.$t("settings.localization.choose_price_unit")},class:"w-full -mt-5"},{default:w(()=>[(t(!0),s(f,null,I(b.value,(k,H)=>(t(),s("option",{value:k.value,key:H},o(n.$t(`settings.localization.priceOptions.${k.key}`)),9,Ce))),128))]),_:2},1032,["modelValue","options"]),e("div",De,o(n.$t("settings.localization.decimal_places")),1),g(a,{modelValue:r.value.decimal_places,"onUpdate:modelValue":m[3]||(m[3]=k=>r.value.decimal_places=k),options:{placeholder:n.$t("settings.localization.choose_decimal_places")},class:"w-full -mt-5"},{default:w(()=>[(t(!0),s(f,null,I(U.value,(k,H)=>(t(),s("option",{value:k.value,key:H},o(k.text),9,je))),128))]),_:2},1032,["modelValue","options"])])])):D("",!0),x.name=="points"?(t(),s(f,{key:1},[Me,g(ve,{meta_point:r.value.meta_point,status:"settings"},null,8,["meta_point"])],64)):D("",!0),x.name=="messages"?(t(),s(f,{key:2},[Pe,g(ge,{meta_reply:r.value.meta_reply,status:"settings"},null,8,["meta_reply"])],64)):D("",!0),x.name=="notes"?(t(),s(f,{key:3},[Oe,e("div",Ee,[e("label",ze,o(n.$t("settings.notes.title")),1),g(y,{class:"accordion-boxed w-full"},{default:w(()=>[g(v,null,{default:w(()=>[g(V,null,{default:w(()=>[e("div",Re,[e("div",Ae,[e("span",He,o(n.$t("settings.notes.delivery_note")),1),J(),Ne,e("span",Le,o(r.value.delivery_note),1)]),e("div",null,[g(d,{content:n.$t("settings.notes.modify"),options:{theme:"light"}},{default:w(()=>[g(p,{icon:"edit",color:"#334155"})]),_:1},8,["content"])])])]),_:1}),g($,{class:"leading-relaxed text-slate-600 dark:text-slate-500"},{default:w(()=>[T(e("textarea",{class:"h-48 p-2 mr-5 form-control",placeholder:n.$t("tooltips.settings.note.delivery_note"),"onUpdate:modelValue":m[4]||(m[4]=k=>r.value.delivery_note=k)},`
                            `,8,Be),[[M,r.value.delivery_note]])]),_:1})]),_:1}),g(v,null,{default:w(()=>[g(V,null,{default:w(()=>[e("div",Ke,[e("div",Ge,[e("span",Fe,o(n.$t("settings.notes.special_note")),1),J(),qe,e("span",Je,o(r.value.special_note),1)]),e("div",null,[g(d,{content:n.$t("settings.notes.modify"),options:{theme:"light"}},{default:w(()=>[g(p,{icon:"edit",color:"#334155"})]),_:1},8,["content"])])])]),_:1}),g($,{class:"leading-relaxed text-slate-600 dark:text-slate-500"},{default:w(()=>[T(e("textarea",{class:"h-48 p-2 mr-5 form-control",placeholder:n.$t("tooltips.settings.note.special_note"),"onUpdate:modelValue":m[5]||(m[5]=k=>r.value.special_note=k)},`
                            `,8,We),[[M,r.value.special_note]])]),_:1})]),_:1}),g(v,null,{default:w(()=>[g(V,null,{default:w(()=>[e("div",Xe,[e("div",Ye,[e("span",Qe,o(n.$t("settings.notes.confirmation_note")),1),J(),Ze,e("span",et,o(r.value.confirmation_note),1)]),e("div",null,[g(d,{content:n.$t("settings.notes.modify"),options:{theme:"light"}},{default:w(()=>[g(p,{icon:"edit",color:"#334155"})]),_:1},8,["content"])])])]),_:1}),g($,{class:"leading-relaxed text-slate-600 dark:text-slate-500"},{default:w(()=>[T(e("textarea",{class:"h-48 p-2 mr-5 form-control",placeholder:n.$t("tooltips.settings.note.confirm_note"),"onUpdate:modelValue":m[6]||(m[6]=k=>r.value.confirmation_note=k)},`
                            `,8,tt),[[M,r.value.confirmation_note]])]),_:1})]),_:1})]),_:1})])],64)):D("",!0)],64))),128)),e("div",st,[e("button",{class:"w-32 ml-5 shadow-md btn btn-primary",onClick:c},o(n.$t("settings.notes.save")),1)])])}}},ot={class:"flex-col text-[16px] flex justify-between mt-5 sm:mt-2"},at={class:"flex"},nt={class:"ml-3 form-label my-auto"},rt={key:0,class:"flex justify-between mt-5 lg:mt-0"},it={class:"mt-2 text-base"},ut=["onUpdate:modelValue"],ct={class:"mt-2 text-base"},dt=["onUpdate:modelValue"],_t={key:2,class:"flex flex-wrap my-3"},mt=["onUpdate:modelValue"],pt={class:"mt-2 text-base form-label"},yt={class:"relative border-2 border-dashed dark:border-darkmode-400"},ft={class:"flex items-center justify-center px-4"},vt=["src"],gt={key:0,class:"px-4 text-[1rem] sm:text-[16px] absolute top-20 text-center w-full flex flex-col items-center justify-center"},ht={class:"flex flex-col items-center justify-center sm:flex-row"},bt={class:"text-slate-600"},$t={class:"mt-2 text-slate-500"},kt={class:"text-slate-500"},xt=["id","onChange"],wt={class:"flex w-full"},Tt=["onClick"],Vt={class:"text-[14px] mt-10 flex"},It={__name:"DirectPayment",props:{payment:Object},setup(P){const h=P,i=L();Q(),Z();const l=G({enabled:!1,title:"",v2_accounts:[]}),b=G([]),_=j([]),U=new FormData,r={v2_accounts:{$each:ee.forEach({mode:{required:N},name:{required:N},number:{required:N}})}},c=F(r,l);B(()=>{!i.userInfo.user_subscription||(i.userInfo.user_subscription.meta_payment[h.payment.key]&&Object.assign(l,JSON.parse(JSON.stringify(i.userInfo.user_subscription.meta_payment[h.payment.key]))),typeof l.enabled!="boolean"&&(l.enabled=!1),Array.isArray(l.v2_accounts)||(l.v2_accounts=[]),l.v2_accounts.forEach(p=>{_.value.push(p.image),b.push(null)}))});const n=(p,V)=>{let $=p.target.files[0];if([null,void 0,""].includes($))return;if($.size/1024/1024>10){i.alert.showMessageToast(A.global.t("settings.img_size_err"));return}if(["image/jpeg","image/jpg","image/png"].indexOf($.type)==-1){i.alert.showMessageToast(A.global.t("settings.img_type_err"));return}b[V]=$;let y=new FileReader;y.readAsDataURL($),y.onload=x=>{_.value[V]=x.target.result}},m=p=>{document.getElementById(`file_input_${p}`).value=null,_.value[p]=null,b[p]="._no_image"},a=p=>{l.v2_accounts.splice(p,1),_.value.splice(p,1),b.splice(p,1),d()},u=()=>{l.v2_accounts.unshift({mode:"",name:"",number:"",note:"",require_customer_return:!0}),_.value.unshift(""),b.unshift("._no_image")},d=()=>{if(c.value.$invalid){i.alert.showMessageToast(A.global.t("settings.invalid_data"));return}U.append("data",JSON.stringify(l)),b.forEach((p,V)=>{const $=l.v2_accounts[V].name+"_"+V;U.append($,p)}),ne(h.payment.key,U,i.alert).then(p=>{i.userInfo=p.data,i.notification.showMessageToast(A.global.t("settings.update_successfully"))})};return(p,V)=>{const $=S("XCircleIcon"),v=S("Tippy"),y=S("ImageIcon");return t(),s(f,null,[e("div",ot,[e("div",at,[T(e("input",{class:"form-control form-check-input w-[1.5rem] h-[1.5rem] my-auto ml-3",type:"checkbox","onUpdate:modelValue":V[0]||(V[0]=x=>l.enabled=x)},null,512),[[O,l.enabled]]),e("label",nt,o(p.$t("settings.payment_form.enabled")),1)])]),l.v2_accounts!=0?(t(),s("div",rt,[e("button",{class:"inline-block rounded-lg btn btn-primary sm:ml-auto w-full md:w-fit text-sm sm:text-lg",onClick:V[1]||(V[1]=x=>u())},o(p.$t("settings.payment_form.add_more_direct_payment")),1)])):D("",!0),l.v2_accounts==0?(t(),s("div",{key:1,onClick:V[2]||(V[2]=x=>u()),class:"border-2 border-dashed border-slate-300 h-36 rounded-xl mt-5 flex justify-center items-center text-slate-400"},o(p.$t("settings.payment_form.add_direct_payment")),1)):D("",!0),(t(!0),s(f,null,I(l.v2_accounts,(x,E)=>(t(),s("div",{key:E,class:"border-slate rounded-md border-2 p-3 my-3"},[(t(!0),s(f,null,I(P.payment.fields,(k,H)=>(t(),s("div",{class:"flex flex-col intro-y",key:H},[k.type==="text"?(t(),s(f,{key:0},[e("label",it,o(p.$t(`settings.payment_form.direct_payment.${k.key}`)),1),T(e("input",{class:"w-full form-control",type:"text","onUpdate:modelValue":R=>x[k.key]=R},null,8,ut),[[M,x[k.key]]]),(t(!0),s(f,null,I(C(c).v2_accounts.$each.$response.$errors[E][k.key],(R,re)=>(t(),s("label",{class:"text-danger text-[12px]",key:re},o(p.$t(`settings.payment_form.errors.${R.$message.replace(/\s/g,"_")}`)),1))),128))],64)):k.type==="textarea"?(t(),s(f,{key:1},[e("label",ct,o(p.$t(`settings.payment_form.direct_payment.${k.key}`)),1),T(e("textarea",{class:"p-2 form-control","onUpdate:modelValue":R=>x[k.key]=R},null,8,dt),[[M,x[k.key]]])],64)):k.type==="checkbox"?(t(),s("div",_t,[T(e("input",{class:"form-control form-label form-check-input w-[1.2rem] h-[1.2rem] my-auto mr-2",type:"checkbox","onUpdate:modelValue":R=>x[k.key]=R},null,8,mt),[[O,x[k.key]]]),e("label",pt,o(p.$t(`settings.payment_form.direct_payment.${k.key}`)),1)])):k.type==="file"?(t(),s(f,{key:3},[e("label",null,o(p.$t("settings.payment_form.upload_image")),1),e("div",yt,[e("div",ft,[e("img",{src:_.value[E],class:"object-cover uploading-image h-60"},null,8,vt),T(g(v,{tag:"a",href:"javascript:;",class:"absolute right-0 top-0 tooltip",content:p.$t("create_campaign.payment_form.remove_image"),options:{theme:"light"}},{default:w(()=>[g($,{class:"absolute right-0 top-0 z-10 click-icon text-danger",onClick:R=>m(E)},null,8,["onClick"])]),_:2},1032,["content"]),[[ce,_.value[E]]])]),[void 0,null,""].includes(_.value[E])?(t(),s("div",gt,[e("div",ht,[g(y,{class:"w-8 h-8 mr-2 -mt-2 text-slate-600"}),e("strong",bt,o(p.$t("settings.payment_form.upload_a_file_or_drag_and_drop")),1)]),e("div",$t,o(p.$t("settings.payment_form.accepted_file_types")),1),e("div",kt,o(p.$t("settings.payment_form.max_file_size")),1)])):D("",!0),e("input",{type:"file",id:`file_input_${E}`,class:"absolute top-0 left-0 w-full h-full opacity-0",accept:"image/jpeg,image/png,image/jpg",onChange:R=>n(R,E)},null,40,xt)])],64)):D("",!0)]))),128)),e("div",wt,[e("button",{class:"inline-block w-24 my-5 ml-auto text-base btn btn-danger",onClick:k=>a(E)},o(p.$t("settings.payment_form.delete")),9,Tt)])]))),128)),e("div",Vt,[e("button",{class:"w-32 shadow-md btn btn-primary ml-auto",onClick:d},o(p.$t("settings.payment_form.update")),1)])],64)}}},Ut={class:"flex flex-col justify-center text-[16px]"},St={class:"flex mt-5 lg:mb-5 lg:mt-0"},Ct={class:"ml-3 form-label"},Dt={class:"my-5 lg:my-0 p-5 rounded-md border-2 border-slate"},jt={key:0},Mt={class:"mt-5 lg:mt-0"},Pt=["onUpdate:modelValue"],Ot={key:1,class:"flex mt-5 lg:mb-5 lg:mt-0"},Et=["onUpdate:modelValue"],zt={class:"ml-3 form-label"},Rt={class:"mt-5 lg:mt-0"},At={class:"flex"},Ht={__name:"PaymentMethod",props:{payment:Object},setup(P){const h=P,i=L();Q(),Z();const l=j({enabled:!1,invoice_enabled:!1});B(()=>{!i.userInfo.user_subscription||(i.userInfo.user_subscription.meta_payment[h.payment.key]&&(l.value=i.userInfo.user_subscription.meta_payment[h.payment.key]),h.payment.fields.forEach(_=>{typeof l.value[_.key]!=_.dataType&&(l.value[_.key]=_.default)}),typeof l.value.enabled!="boolean"&&(l.value.enabled=!1))});const b=()=>{ne(h.payment.key,l.value,i.alert).then(_=>{i.userInfo=_.data,i.notification.showMessageToast(A.global.t("settings.update_successfully"))})};return(_,U)=>{const r=S("TomSelect");return t(),s("div",Ut,[e("div",St,[T(e("input",{class:"form-check-input ml-3 w-[1.5rem] h-[1.5rem]",type:"checkbox","onUpdate:modelValue":U[0]||(U[0]=c=>l.value.enabled=c)},null,512),[[O,l.value.enabled]]),e("label",Ct,o(_.$t("settings.payment_form.enabled")),1)]),e("div",Dt,[h.payment.fields==""?(t(),s("div",jt," Add your "+o(h.payment.key)+" account ",1)):D("",!0),(t(!0),s(f,null,I(h.payment.fields,(c,n)=>(t(),s("div",{class:"flex-col flex gap-2 my-2 intro-y w-full",key:n},[c.type==="text"||c.type==="password"?(t(),s(f,{key:0},[e("label",Mt,o(_.$t(`settings.payment_form.${h.payment.key}.${c.key}`)),1),T(e("input",{class:"col-span-12 -mt-3 form-control lg:mt-0 lg:w-5/6",type:"text","onUpdate:modelValue":m=>l.value[c.key]=m},null,8,Pt),[[M,l.value[c.key]]])],64)):D("",!0),c.type==="checkbox"?(t(),s("div",Ot,[T(e("input",{class:"form-check-input ml-3 w-[1.5rem] h-[1.5rem]",type:"checkbox","onUpdate:modelValue":m=>l.value[c.key]=m},null,8,Et),[[O,l.value[c.key]]]),e("label",zt,o(_.$t("settings.payment_form.invoice_enabled")),1)])):c.type==="select"?(t(),s(f,{key:2},[e("label",Rt,o(_.$t(`settings.payment_form.${h.payment.key}.${c.key}`)),1),g(r,{class:"w-full sm:w-[300px]",modelValue:l.value[c.key],"onUpdate:modelValue":m=>l.value[c.key]=m},{default:w(()=>[(t(!0),s(f,null,I(c.options,m=>(t(),s("option",{key:m},o(m),1))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):D("",!0)]))),128))]),e("div",At,[e("button",{class:"btn btn-primary w-32 shadow-md ml-auto mt-7",onClick:U[1]||(U[1]=c=>b())},o(_.$t("settings.payment_form.update")),1)])])}}},Nt={class:"p-2 2xl:p-10"},Lt={key:0,class:"inline-flex items-center my-auto grow w-full"},Bt={class:"w-[75px] text-sm lg:text-lg lg:w-32 mx-auto"},Kt={key:1,class:"inline-flex items-center my-auto grow w-full mx-auto"},Gt={class:"w-[75px] text-sm lg:text-lg lg:w-32 mx-auto"},Ft={class:"mt-0 lg:mt-5 lg:px-10 lg:mx-10"},qt={__name:"Main",setup(P){const h=de(),i=L(),l=j([]),b=j(!1);return B(()=>{if(!i.userInfo.user_subscription)return;const _=i.userInfo.user_subscription.meta_country,U=new Set;_.activated_country.forEach(r=>{h[r].forEach(c=>U.add(c))}),U.forEach(r=>{l.value.push(h[r])}),b.value=!0,console.log(l.value)}),(_,U)=>{const r=S("font-awesome-icon"),c=S("Tab"),n=S("TabList"),m=S("TabPanel"),a=S("TabPanels"),u=S("TabGroup");return t(),s("div",Nt,[b.value?(t(),z(u,{key:0},{default:w(()=>[g(n,{class:"flex flex-wrap items-center justify-end gap-1 sm:gap-3 nav-boxed-tabs sm:px-10"},{default:w(()=>[(t(!0),s(f,null,I(l.value,(d,p)=>(t(),z(c,{class:"h-20 mx-auto border-[#131c34] w-[100%] max-w-[180px] text-center",tag:"button",key:p},{default:w(()=>[d.name==="Direct Payment"?(t(),s("div",Lt,[g(r,{icon:"fa-solid fa-money-check-dollar",class:"hidden sm:block h-6 mr-1"}),e("span",Bt,o(_.$t(`settings.payment_form.payment_titles.${d.key}`)),1)])):(t(),s("div",Kt,[g(r,{icon:"fa-regular fa-credit-card",class:"hidden sm:block h-6 mr-1"}),e("span",Gt,o(_.$t(`settings.payment_form.payment_titles.${d.key}`)),1)]))]),_:2},1024))),128))]),_:1}),e("div",Ft,[g(a,null,{default:w(()=>[(t(!0),s(f,null,I(l.value,(d,p)=>(t(),z(m,{class:"leading-relaxed",key:p},{default:w(()=>[d.key=="direct_payment"?(t(),z(It,{key:0,payment:d},null,8,["payment"])):(t(),z(Ht,{key:1,payment:d},null,8,["payment"]))]),_:2},1024))),128))]),_:1})])]),_:1})):D("",!0)])}}},Jt=_e("logisticMeta",{state:()=>({own_delivery:{multiple:!0,name:"Own Delivery",key:"own_delivery",icon:"https://storage.googleapis.com/lss_public_bucket/static/payment/stripe/icon.png",fields:[{key:"delivery_charge",dataType:"number",default:999999},{key:"is_free_delivery_for_order_above_price",dataType:"boolean",default:!1},{key:"free_delivery_for_order_above_price",dataType:"number",default:999999},{key:"is_free_delivery_for_how_many_order_minimum",dataType:"boolean",default:!1},{key:"free_delivery_for_how_many_order_minimum",dataType:"number",default:99},{key:"is_additional_delivery_charge",dataType:"boolean",default:!0},{key:"additional_delivery_options",dataType:"object",default:[]}]},store_pickup:{multiple:!0,name:"Store Pickup",key:"store_pickup",icon:"https://storage.googleapis.com/lss_public_bucket/static/payment/stripe/icon.png",fields:[{key:"pickup_options",dataType:"object",default:[]}]},ecpay:{multiple:!1,name:"\u7DA0\u754C",key:"ecpay",icon:"https://storage.googleapis.com/lss_public_bucket/static/payment/ecpay/icon.jpeg",fields:[{key:"merchant_id",type:"text",name:"Merchant ID",dataType:"string",default:""},{key:"hash_key",type:"text",name:"HashKey",dataType:"string",default:""},{key:"hash_iv",type:"text",name:"HashIV",dataType:"string",default:""},{key:"return_store_id",type:"text",name:"Store ID",dataType:"string",default:""},{key:"logistics_sub_type",name:"Shipping Methods",dataType:"object",default:{},options:{TCAT:[{key:"enabled",type:"checkbox",name:"enabled",dataType:"boolean",default:!1},{key:"title",type:"text",name:"\u9ED1\u8C93\u5B85\u914D",dataType:"string",default:"\u9ED1\u8C93\u5B85\u914D"},{key:"type",type:"select",name:"type",dataType:"string",default:"="},{key:"delivery_charge",type:"number",name:"delivery charge",dataType:"number",default:0}],FAMIC2C:[{key:"enabled",type:"checkbox",name:"enabled",dataType:"boolean",default:!1},{key:"title",type:"text",name:"\u5168\u5BB6\u5E97\u5230\u5E97",dataType:"string",default:"\u5168\u5BB6\u5E97\u5230\u5E97"},{key:"type",type:"select",name:"type",dataType:"string",default:"="},{key:"delivery_charge",type:"number",name:"delivery charge",dataType:"number",default:0}],UNIMARTC2C:[{key:"enabled",type:"checkbox",name:"enabled",dataType:"boolean",default:!1},{key:"title",type:"text",name:"7-11\u5E97\u5230\u5E97",dataType:"string",default:"7-11\u5E97\u5230\u5E97"},{key:"type",type:"select",name:"type",dataType:"string",default:"="},{key:"delivery_charge",type:"number",name:"delivery charge",dataType:"number",default:0}]}},{key:"sender_name",type:"text",name:"Sender Name",dataType:"string",default:""},{key:"sender_phone",type:"text",name:"Phone",dataType:"string",default:""},{key:"sender_zip_code",type:"text",name:"zipCode",dataType:"string",default:""},{key:"sender_address",type:"text",name:"address",dataType:"string",default:""}],handle:{type:"submitForm",endpoint:"getEcpayCredential"}},SG:["own_delivery","store_pickup"],ID:["own_delivery","store_pickup"],MY:["own_delivery","store_pickup"],IN:["own_delivery","store_pickup"],PH:["own_delivery","store_pickup"],VN:["own_delivery","store_pickup"],TW:["own_delivery","store_pickup","ecpay"],CN:["own_delivery","store_pickup"],KH:["own_delivery","store_pickup"],AU:["own_delivery","store_pickup"],HK:["own_delivery","store_pickup"],logisticMap:{own_delivery:"Own Delivery",store_pickup:"Store Pickup",ecpay:"ECPay"}})}),Wt={class:"py-5 sm:p-5"},Xt={class:"flex flex-row justify-start"},Yt={class:"ml-3 form-label my-auto"},Qt={class:"flex flex-col gap-1 text-base my-5 intro-y sm:gap-3 -z-50"},Zt={class:"flex flex-col mt-2 text-[16px] gap-2"},es={class:"w-fit text-base whitespace-nowrap"},ts={class:"flex flex-row gap-5"},ss={class:"flex flex-col"},ls={class:"w-fit text-base whitespace-nowrap"},os={class:"flex flex-col"},as={class:"w-fit text-base whitespace-nowrap"},ns={class:"flex flex-wrap justify-between mt-5"},rs={for:"regular-form-2",class:"text-base font-bold form-label my-auto"},is={key:0,class:"flex flex-col justify-between w-full sm:w-fit"},us=["placeholder","onUpdate:modelValue"],cs={key:1,class:"flex flex-col justify-between w-full sm:w-fit"},ds=["placeholder","onUpdate:modelValue"],_s={key:2,class:"w-full sm:w-fit"},ms=["onUpdate:modelValue"],ps={value:"+"},ys={value:"="},fs={key:3,class:"w-full sm:w-fit"},vs=["placeholder","onUpdate:modelValue"],gs={class:"w-full sm:w-fit"},hs=["onUpdate:modelValue"],bs={class:"text-[16px] ml-2"},$s={class:"w-full sm:w-fit"},ks=["disabled","onUpdate:modelValue"],xs={value:void 0},ws=["value"],Ts=["onClick"],Vs={class:"flex mt-5 float-right text-[14px]"},Is={__name:"OwnDelivery",props:{logistic:Object},setup(P){const h=P,i=L(),l=j([{key:"FAMIC2C",name:"\u5168\u5BB6\u5E97\u5230\u5E97"},{key:"UNIMARTC2C",name:"7-11\u5E97\u5230\u5E97"},{key:"HILIFEC2C",name:"\u840A\u723E\u5BCC\u5E97\u5230\u5E97"},{key:"OKMARTC2C",name:"OK\u5E97\u5230\u5E97"}]);j([{key:"is_enabled",type:"checkbox",default:!1},{key:"title",type:"text",default:""},{key:"type",type:"select",default:"="},{key:"price",name:"",type:"number",default:0}]);const b=K(()=>{var a={region:null,title:null,type:null,price:null};return i.userInfo.user_subscription.meta_country.activated_country.includes("TW")&&Object.assign(a,{is_cvs:!1}),a});j({});const _=G({delivery_charge:0,title:"",is_self_delivery_enabled:!1,is_additional_delivery_charge:!0,additional_delivery_options:[]}),U={delivery_charge:{decimal:me,minValue:pe(0)},additional_delivery_options:{$each:ee.forEach({region:{required:N},title:{required:N},type:{required:N},price:{required:N,numeric:X}})}},r=F(U,_);B(()=>{!i.userInfo.user_subscription||(Object.entries(_).forEach(([a])=>{_[a]=i.userInfo.user_subscription.meta_logistic[a]}),h.logistic.fields.forEach(a=>{typeof _[a.key]!=a.dataType&&(_[a.key]=a.default)}))});const c=()=>{_.additional_delivery_options.unshift(Object.assign({},b.value)),console.log(_.additional_delivery_options)},n=a=>{_.additional_delivery_options.splice(a,1)},m=()=>{if(r.value.$touch(),r.value.$invalid){i.alert.showMessageToast("Invalid data");return}console.log(_),q(_,i.alert).then(a=>{i.userInfo.user_subscription.meta_logistic=a.data.user_subscription.meta_logistic,i.notification.showMessageToast(A.global.t("settings.update_successfully"))})};return(a,u)=>(t(),s("div",Wt,[e("div",Xt,[T(e("input",{class:"form-check-input w-[1.5rem] h-[1.5rem] my-auto",type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=d=>_.is_self_delivery_enabled=d)},null,512),[[O,_.is_self_delivery_enabled]]),e("label",Yt,o(a.$t("settings.delivery_form.enabled")),1)]),e("div",Qt,[e("div",Zt,[e("label",es,o(a.$t("settings.delivery.charge")),1),e("div",ts,[e("div",ss,[e("label",ls,o(a.$t("settings.delivery.title")),1),T(e("input",{class:"w-32 form-control h-[35px] sm:h-[42px]",type:"text","onUpdate:modelValue":u[1]||(u[1]=d=>_.title=d)},null,512),[[M,_.title]])]),e("div",os,[e("label",as,o(a.$t("settings.delivery.price")),1),T(e("input",{class:"w-full form-control h-[35px] sm:h-[42px]",type:"number","onUpdate:modelValue":u[2]||(u[2]=d=>_.delivery_charge=d),onBlur:u[3]||(u[3]=d=>C(r).delivery_charge.$touch())},null,544),[[M,_.delivery_charge]])])])]),e("div",ns,[e("label",rs,o(a.$t("settings.delivery.charge_option")),1),e("button",{class:"inline-block rounded-lg btn btn-primary ml-auto w-fit text-sm sm:text-[16px]",onClick:u[4]||(u[4]=d=>c())},o(a.$t("settings.delivery.add_more_delivery_option")),1)]),(t(!0),s(f,null,I(_.additional_delivery_options,(d,p)=>(t(),s("div",{class:"flex flex-col flex-wrap gap-3 mt-5 sm:flex-row sm:mt-0 items-center",key:p},[(t(!0),s(f,null,I(b.value,(V,$,v)=>(t(),s(f,{key:v},[$=="region"?(t(),s("div",is,[T(e("input",{class:"w-full form-control flex-2 sm:w-fit",type:"text",placeholder:a.$t("settings.delivery_form.express_service_region"),"onUpdate:modelValue":y=>d.region=y},null,8,us),[[M,d.region]]),(t(!0),s(f,null,I(C(r).additional_delivery_options.$each.$response.$errors[p].region,(y,x)=>(t(),s("label",{class:"block text-danger text-[12px]",key:x},o(a.$t(`settings.delivery.errors.${y.$message.replace(/\s/g,"_")}`)),1))),128))])):D("",!0),$=="title"?(t(),s("div",cs,[T(e("input",{class:"w-full form-control flex-2 sm:w-fit",type:"text",placeholder:a.$t("settings.delivery_form.express_service_name"),"onUpdate:modelValue":y=>d.title=y},null,8,ds),[[M,d.title]]),(t(!0),s(f,null,I(C(r).additional_delivery_options.$each.$response.$errors[p].title,(y,x)=>(t(),s("label",{class:"block text-danger text-[12px]",key:x},o(a.$t(`settings.delivery.errors.${y.$message.replace(/\s/g,"_")}`)),1))),128))])):D("",!0),$=="type"?(t(),s("div",_s,[T(e("select",{class:"flex-1 w-full rounded-lg form-select sm:form-select-lg sm:w-fit","onUpdate:modelValue":y=>d.type=y},[e("option",ps,o(a.$t("settings.delivery.on_top_of_charge")),1),e("option",ys,o(a.$t("settings.delivery.replace_charge")),1)],8,ms),[[te,d.type]]),(t(!0),s(f,null,I(C(r).additional_delivery_options.$each.$response.$errors[p].type,(y,x)=>(t(),s("label",{class:"block text-danger text-[12px]",key:x},o(a.$t(`settings.delivery.errors.${y.$message.replace(/\s/g,"_")}`)),1))),128))])):D("",!0),$=="price"?(t(),s("div",fs,[T(e("input",{class:"w-full form-control flex-2 sm:w-fit",type:"text",placeholder:a.$t("settings.delivery_form.express_charge"),"onUpdate:modelValue":y=>d.price=y},null,8,vs),[[M,d.price]]),(t(!0),s(f,null,I(C(r).additional_delivery_options.$each.$response.$errors[p].price,(y,x)=>(t(),s("label",{class:"block text-danger text-[12px]",key:x},o(a.$t(`settings.delivery.errors.${y.$message.replace(/\s/g,"_")}`)),1))),128))])):D("",!0),$=="is_cvs"?(t(),s(f,{key:4},[e("div",gs,[T(e("input",{class:"form-control w-[1.5rem] h-[1.5rem]",type:"checkbox","onUpdate:modelValue":y=>d.is_cvs=y},null,8,hs),[[O,d.is_cvs]]),e("label",bs,o(a.$t("settings.delivery.own_delivery.is_cvs")),1)]),e("div",$s,[T(e("select",{disabled:d.is_cvs!==!0,class:"flex-1 w-full rounded-lg form-select sm:form-select-lg sm:w-fit","onUpdate:modelValue":y=>d.cvs_key=y},[e("option",xs,o(a.$t("settings.delivery.own_delivery.turn_on_cvs_map")),1),(t(!0),s(f,null,I(l.value,(y,x)=>(t(),s("option",{key:x,value:y.key},o(a.$t("settings.delivery.own_delivery.cvs_map")+":"+y.name),9,ws))),128))],8,ks),[[te,d.cvs_key]])])],64)):D("",!0)],64))),128)),e("button",{class:"inline-block w-full h-[42px] ml-auto text-base btn btn-danger sm:rounded-lg sm:w-24",onClick:V=>n(p)},o(a.$t("settings.delivery_form.delete")),9,Ts)]))),128))]),e("div",Vs,[e("button",{class:"w-36 ml-5 shadow-md btn btn-primary float-right",onClick:u[5]||(u[5]=d=>m())},o(a.$t("settings.delivery_form.delivery_method_settings_update")),1)])]))}},Us={class:"py-5 sm:p-10 sm:p-5"},Ss={class:"flex flex-row justify-start my-5 lg:mt-0 items-center gap-3"},Cs={class:"text-[16px]"},Ds={class:"mb-3 text-lg sm:text-xl font-medium leading-none"},js={class:"flex flex-wrap justify-between my-5"},Ms={class:"text-sm sm:text-[16px] flex flex-col gap-3 sm:gap-5 my-5"},Ps={class:"flex flex-col flex-1"},Os={class:"text-base whitespace-nowrap"},Es=["onUpdate:modelValue"],zs={class:"flex flex-col flex-wrap flex-grow-1"},Rs={class:"text-base text-lg font-medium whitespace-nowrap"},As={class:"flex items-center justify-center"},Hs=["value"],Ns=["value"],Ls={class:"flex flex-col flex-wrap flex-grow-2"},Bs={class:"text-base"},Ks={class:"flex flex-row"},Gs=["onUpdate:modelValue"],Fs=["onClick"],qs=["onClick"],Js={class:"flex mt-5 float-right text-[14px]"},Ws={__name:"StorePickup",props:{logistic:Object},setup(P){const h=P,i=L(),l=G({pickup_options:[],is_store_pickup_enabled:!1}),b=j([]),_={pickup_options:{$each:ee.forEach({name:{required:N},address:{required:N}})}},U=F(_,l),r={name:null,address:null,start_at:null,end_at:null};B(()=>{!i.userInfo.user_subscription||(Object.entries(l).forEach(([u])=>{l[u]=i.userInfo.user_subscription.meta_logistic[u]}),h.logistic.fields.forEach(u=>{typeof l[u.key]!=u.dataType&&(l[u.key]=u.default)}),a())});const c=()=>{l.pickup_options.unshift(Object.assign({},r)),b.value.unshift({start:null,end:null})},n=u=>{l.pickup_options.splice(u,1),b.value.splice(u,1)},m=()=>{if(console.log("PICKUP"),U.value.$touch(),U.value.$invalid){i.alert.showMessageToast("Invalid data");return}console.log(l),q(l,i.alert).then(u=>{i.userInfo.user_subscription.meta_logistic=u.data.user_subscription.meta_logistic,i.notification.showMessageToast(A.global.t("settings.update_successfully"))})};Y(K(()=>i.userInfo.user_subscription.meta_logistic.pickup_options),()=>{b.value.length===0&&a()},{deep:!0}),Y(K(()=>b.value),()=>{for(let u=0;u<l.pickup_options.length;u++)l.pickup_options[u].start_at=b.value[u].start,l.pickup_options[u].end_at=b.value[u].end},{deep:!0});const a=()=>{var d,p;let u=(d=i.userInfo.user_subscription.meta_logistic)!=null&&d.pickup_options?(p=i.userInfo.user_subscription.meta_logistic)==null?void 0:p.pickup_options:{};for(let V=0;V<u.length;V++)b.value.push({start:i.userInfo.user_subscription.meta_logistic.pickup_options[V].start_at?i.userInfo.user_subscription.meta_logistic.pickup_options[V].start_at:null,end:i.userInfo.user_subscription.meta_logistic.pickup_options[V].end_at?i.userInfo.user_subscription.meta_logistic.pickup_options[V].end_at:null});console.log(b.value)};return(u,d)=>{const p=S("ChevronsRightIcon"),V=S("v-date-picker");return t(),s("div",Us,[e("div",Ss,[T(e("input",{class:"form-check-input w-[1.5rem] h-[1.5rem]",type:"checkbox","onUpdate:modelValue":d[0]||(d[0]=$=>l.is_store_pickup_enabled=$)},null,512),[[O,l.is_store_pickup_enabled]]),e("label",Cs,o(u.$t("settings.delivery_form.enabled")),1)]),e("span",Ds,o(u.$t("settings.delivery.store.collection")),1),e("div",js,[e("button",{class:"inline-block rounded-lg btn btn-primary sm:mr-auto w-fit text-sm sm:text-[16px]",onClick:d[1]||(d[1]=$=>c())},o(u.$t("settings.delivery_form.add_more_pickup_option")),1)]),e("div",Ms,[(t(!0),s(f,null,I(l.pickup_options,($,v)=>(t(),s("div",{key:v,class:"flex flex-col flex-wrap gap-3 sm:flex-row my-3"},[e("div",Ps,[e("label",Os,o(u.$t("settings.delivery.store.pickup_store")),1),T(e("input",{class:"w-full h-[42px] text-base form-control",type:"text","onUpdate:modelValue":y=>$.name=y},null,8,Es),[[M,$.name]]),(t(!0),s(f,null,I(C(U).pickup_options.$each.$response.$errors[v].name,(y,x)=>(t(),s("label",{class:"block text-danger text-[12px]",key:x},o(u.$t(`settings.delivery.errors.${y.$message.replace(/\s/g,"_")}`)),1))),128))]),e("div",zs,[e("label",Rs,o(u.$t("create_campaign.delivery_form.pickup_date"))+" "+o($.start_at!==null?"( "+new Date($.start_at).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"})+"~"+new Date($.end_at).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"})+" )":""),1),g(V,{class:"",modelValue:b.value[v],"onUpdate:modelValue":y=>b.value[v]=y,timezone:u.timezone,columns:1,mode:"datetime","is-range":"","is-required":"",is24hr:"","min-date":new Date},{default:w(({inputValue:y,inputEvents:x})=>[e("div",As,[e("input",se({value:y.start},le(x.start,!0),{class:"form-control border h-[42px] px-2 py-1 w-42 rounded focus:outline-none focus:border-indigo-300"}),null,16,Hs),g(p,{class:"w-8 h-8 m-1"}),e("input",se({value:y.end},le(x.end,!0),{disabled:"",class:"form-control border h-[42px] px-2 py-1 w-42 rounded focus:outline-none focus:border-indigo-300"}),null,16,Ns)])]),_:2},1032,["modelValue","onUpdate:modelValue","timezone","min-date"])]),e("div",Ls,[e("label",Bs,o(u.$t("settings.delivery.store.pickup_address")),1),e("div",Ks,[T(e("input",{class:"w-full h-[42px] sm:mr-5 text-base form-control",type:"text","onUpdate:modelValue":y=>$.address=y},null,8,Gs),[[M,$.address]]),e("button",{class:"hidden sm:inline-block w-full btn btn-danger sm:ml-auto sm:rounded-lg sm:w-24 h-[42px]",onClick:y=>n(v)},o(u.$t("settings.delivery_form.delete")),9,Fs)]),(t(!0),s(f,null,I(C(U).pickup_options.$each.$response.$errors[v].address,(y,x)=>(t(),s("label",{class:"text-danger text-[12px]",key:x},o(u.$t(`settings.delivery.errors.${y.$message.replace(/\s/g,"_")}`)),1))),128)),e("button",{class:"inline-block sm:hidden w-full btn btn-danger sm:ml-auto sm:rounded-lg sm:w-24 h-[42px] mt-3",onClick:y=>n(v)},o(u.$t("settings.delivery_form.delete")),9,qs)])]))),128))]),e("div",Js,[e("button",{class:"w-36 ml-5 shadow-md btn btn-primary float-right",onClick:d[2]||(d[2]=$=>m())},o(u.$t("settings.delivery_form.delivery_method_settings_update")),1)])])}}},Xs={key:0,class:"flex flex-col justify-center py-5 sm:p-5"},Ys={class:"flex flex-row justify-start mt-5 lg:mb-5 lg:mt-0"},Qs={class:"ml-3 form-label my-auto"},Zs={class:"my-5 lg:my-0 p-5 rounded-md border-2 border-slate text-[16px]"},el={key:0},tl={class:"mt-3 form-label"},sl={class:"flex flex-row flex-wrap gap-5 justify-between mb-5 lg:w-5/6"},ll=["type","onUpdate:modelValue"],ol={key:1,class:"ml-2"},al={key:2},nl={class:"ml-auto my-auto"},rl=["type","min","onUpdate:modelValue","readonly"],il={class:"flex"},ul=["disabled"],cl={class:"ml-3 form-label"},dl={class:"mt-5 lg:mt-0"},_l=["onUpdate:modelValue"],ml={key:1,class:"flex mt-5 lg:mb-5 lg:mt-0"},pl=["onUpdate:modelValue"],yl={class:"ml-3 form-label"},fl={class:"mt-5 lg:mt-0"},vl=["value"],gl={class:"flex text-[14px]"},hl={__name:"DeliveryMethod",props:{logistic:Object},setup(P){const h=P,i=L();Q(),Z();const l=j({enabled:!1,allow_pickup_pay:!1,logistics_sub_type:{}}),b=j(!1),_=j(!0);B(()=>{!i.userInfo.user_subscription||(i.userInfo.user_subscription.meta_logistic[h.logistic.key]&&(l.value=i.userInfo.user_subscription.meta_logistic[h.logistic.key]),typeof l.value.enabled!="boolean"&&(l.value.enabled=!1),h.logistic.fields.forEach(c=>{typeof l.value[c.key]!=c.dataType&&(l.value[c.key]=c.default),c.dataType=="object"&&Object.entries(c.options).forEach(([n,m])=>{l.value[c.key][n]||(l.value[c.key][n]={}),m.forEach(a=>{l.value[c.key][n][a.key]||(l.value[c.key][n][a.key]=a.default)})})}),b.value=!0)});const U=()=>{console.log("ecPay"),console.log("log",l.value),q({ecpay:l.value},i.alert).then(c=>{i.userInfo.user_subscription.meta_logistic=c.data.user_subscription.meta_logistic,i.notification.showMessageToast(A.global.t("settings.update_successfully"))})},r=()=>{_.value=!0;let c=!1;Object.entries(l.value.logistics_sub_type).forEach(([n,m])=>{if(n!=="TCAT"&&m.enabled==!0)return _.value=!1,c=!0,!1}),c||(l.value.allow_pickup_pay=!1)};return Y(K(()=>l.value),()=>{r()},{deep:!0}),(c,n)=>{const m=S("TomSelect");return b.value?(t(),s("div",Xs,[e("div",Ys,[T(e("input",{class:"form-check-input w-[1.5rem] h-[1.5rem] my-auto",type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=a=>l.value.enabled=a)},null,512),[[O,l.value.enabled]]),e("label",Qs,o(c.$t("settings.delivery_form.enabled")),1)]),e("div",Zs,[h.logistic.fields==""?(t(),s("div",el," Add your "+o(h.logistic.key)+" account ",1)):D("",!0),(t(!0),s(f,null,I(h.logistic.fields,(a,u)=>(t(),s("div",{class:"flex-col flex gap-2 my-2 intro-y w-full",key:u},[a.dataType==="object"?(t(),s(f,{key:0},[e("label",tl,o(c.$t(`settings.delivery_form.${h.logistic.key}.shipping_way`)),1),e("div",sl,[(t(!0),s(f,null,I(a.options,(d,p,V)=>(t(),s("div",{key:V,class:"flex-row flex-wrap col-span-3 md:col-span-1"},[(t(!0),s(f,null,I(d,($,v)=>(t(),s(f,{key:v},[$.type==="checkbox"?T((t(),s("input",{key:0,class:"form-check-input w-[1.5rem] h-[1.5rem]",type:$.type,"onUpdate:modelValue":y=>l.value[a.key][p][$.key]=y},null,8,ll)),[[oe,l.value[a.key][p][$.key]]]):D("",!0),$.type==="text"?(t(),s("label",ol,o(c.$t(`settings.delivery_form.${h.logistic.key}.${a.key}.${p}`)),1)):D("",!0),$.type==="number"?(t(),s("div",al,[e("span",nl,o(c.$t(`settings.delivery_form.${h.logistic.key}.${a.key}.${$.key}`)),1),T(e("input",{type:$.type,min:$.default,class:"text-center w-20 h-[33px] form-control px-1 ml-1","onUpdate:modelValue":y=>l.value[a.key][p][$.key]=y,readonly:l.value[a.key][p].enabled==!1},null,8,rl),[[oe,l.value[a.key][p][$.key]]])])):D("",!0)],64))),128))]))),128))]),e("div",il,[T(e("input",{class:"form-check-input w-[1.5rem] h-[1.5rem]",type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=d=>l.value.allow_pickup_pay=d),disabled:_.value},null,8,ul),[[O,l.value.allow_pickup_pay]]),e("label",cl,o(c.$t("settings.delivery_form.ecpay.pickup_pay")),1)])],64)):(t(),s(f,{key:1},[a.type==="text"||a.type==="password"?(t(),s(f,{key:0},[e("label",dl,o(c.$t(`settings.delivery_form.${h.logistic.key}.${a.key}`)),1),T(e("input",{class:"col-span-12 -mt-3 form-control lg:mt-0 lg:w-5/6",type:"text","onUpdate:modelValue":d=>l.value[a.key]=d},null,8,_l),[[M,l.value[a.key]]])],64)):a.type==="checkbox"?(t(),s("div",ml,[T(e("input",{class:"form-check-input ml-3 w-[1.5rem] h-[1.5rem]",type:"checkbox","onUpdate:modelValue":d=>l.value[a.key]=d},null,8,pl),[[O,l.value[a.key]]]),e("label",yl,o(c.$t(`settings.delivery_form.${h.logistic.key}.${a.key}`)),1)])):a.type==="select"?(t(),s(f,{key:2},[e("label",fl,o(c.$t(`settings.delivery_form.${h.logistic.key}.${a.key}`)),1),g(m,{class:"w-full sm:w-[300px]",modelValue:l.value[a.key],"onUpdate:modelValue":d=>l.value[a.key]=d},{default:w(()=>[(t(!0),s(f,null,I(a.fields,(d,p)=>(t(),s("option",{key:p,value:d.vlaue},o(d.name),9,vl))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):D("",!0)],64))]))),128))]),e("div",gl,[e("button",{class:"btn btn-primary w-36 shadow-md ml-auto mt-7",onClick:n[2]||(n[2]=a=>U())},o(c.$t("settings.delivery_form.delivery_method_settings_update")),1)])])):D("",!0)}}},bl={class:"p-2 2xl:p-10 mx-5"},$l={class:"mb-3 text-lg sm:text-xl font-medium leading-none"},kl={class:"flex mt-5"},xl={class:"w-full text-base"},wl={class:"flex mt-5"},Tl={class:"w-full text-base"},Vl={class:"flex text-[14px]"},Il={class:"p-2 2xl:p-10 mx-5"},Ul={class:"mb-3 text-lg sm:text-xl font-medium leading-none"},Sl={key:0,class:"inline-flex items-center my-auto grow w-full"},Cl={class:"w-[75px] text-sm lg:text-lg lg:w-32 mx-auto"},Dl={key:1,class:"inline-flex items-center my-auto grow w-full mx-auto"},jl={class:"w-[75px] text-sm lg:text-lg lg:w-32 mx-auto"},Ml={class:"mt-0 lg:mt-5 lg:px-10 xl:mx-10"},Pl={__name:"Main",setup(P){const h=Jt(),i=L(),l=j([]),b=j(!1);B(()=>{if(!i.userInfo.user_subscription)return;const n=i.userInfo.user_subscription.meta_country,m=i.userInfo.user_subscription.meta_logistic,a=new Set;n.activated_country.forEach(u=>{h[u].forEach(d=>a.add(d))}),a.forEach(u=>{l.value.push(h[u])}),Object.entries(_.value).forEach(([u,d])=>{_.value[u]=m[u]}),i.userInfo.user_subscription.type=="kol"&&(l.value=l.value.filter(u=>u.key!=="ecpay")),b.value=!0});const _=j({is_free_delivery_for_order_above_price:!0,free_delivery_for_order_above_price:0,is_free_delivery_for_how_many_order_minimum:!0,free_delivery_for_how_many_order_minimum:0}),U={is_free_delivery_for_order_above_price:{},is_free_delivery_for_how_many_order_minimum:{},free_delivery_for_order_above_price:{required:ae(()=>_.value.is_free_delivery_for_order_above_price==!0),numeric:X},free_delivery_for_how_many_order_minimum:{required:ae(()=>_.value.is_free_delivery_for_how_many_order_minimum==!0),numeric:X}},r=F(U,_.value),c=()=>{if(r.value.$touch(),r.value.$invalid){i.alert.showMessageToast("Invalid data");return}q(_.value,i.alert).then(n=>{i.userInfo.user_subscription.meta_logistic=n.data.user_subscription.meta_logistic,i.notification.showMessageToast(A.global.t("settings.update_successfully"))})};return(n,m)=>{const a=S("font-awesome-icon"),u=S("Tab"),d=S("TabList"),p=S("TabPanel"),V=S("TabPanels"),$=S("TabGroup");return t(),s(f,null,[e("div",bl,[e("div",$l,o(n.$t("settings.delivery.free_delivery_settings")),1),e("div",kl,[T(e("input",{class:"form-control form-check-input w-[1.2rem] h-[1.2rem] mr-2",type:"checkbox","onUpdate:modelValue":m[0]||(m[0]=v=>C(r).is_free_delivery_for_order_above_price.$model=v),onBlur:m[1]||(m[1]=(...v)=>C(r).is_free_delivery_for_order_above_price.$touch&&C(r).is_free_delivery_for_order_above_price.$touch(...v))},null,544),[[O,C(r).is_free_delivery_for_order_above_price.$model]]),e("label",xl,o(n.$t("settings.delivery.order_above")),1)]),T(e("input",{class:"w-full form-control",type:"number","onUpdate:modelValue":m[2]||(m[2]=v=>C(r).free_delivery_for_order_above_price.$model=v),onBlur:m[3]||(m[3]=(...v)=>C(r).free_delivery_for_order_above_price.$touch&&C(r).free_delivery_for_order_above_price.$touch(...v))},null,544),[[M,C(r).free_delivery_for_order_above_price.$model]]),(t(!0),s(f,null,I(C(r).free_delivery_for_order_above_price.$errors,(v,y)=>(t(),s("label",{class:"block text-danger text-[12px]",key:y},o(n.$t(`settings.delivery.errors.${v.$validator}`)),1))),128)),e("div",wl,[T(e("input",{class:"form-control form-check-input w-[1.2rem] h-[1.2rem] mr-2",type:"checkbox","onUpdate:modelValue":m[4]||(m[4]=v=>C(r).is_free_delivery_for_how_many_order_minimum.$model=v),onBlur:m[5]||(m[5]=(...v)=>C(r).is_free_delivery_for_how_many_order_minimum.$touch&&C(r).is_free_delivery_for_how_many_order_minimum.$touch(...v))},null,544),[[O,C(r).is_free_delivery_for_how_many_order_minimum.$model]]),e("label",Tl,o(n.$t("settings.delivery.minimum")),1)]),T(e("input",{class:"w-full form-control",type:"number","onUpdate:modelValue":m[6]||(m[6]=v=>C(r).free_delivery_for_how_many_order_minimum.$model=v),onBlur:m[7]||(m[7]=(...v)=>C(r).free_delivery_for_how_many_order_minimum.$touch&&C(r).free_delivery_for_how_many_order_minimum.$touch(...v))},null,544),[[M,C(r).free_delivery_for_how_many_order_minimum.$model]]),(t(!0),s(f,null,I(C(r).free_delivery_for_how_many_order_minimum.$errors,(v,y)=>(t(),s("label",{class:"block text-danger text-[12px]",key:y},o(n.$t(`settings.delivery.errors.${v.$validator}`)),1))),128)),e("div",Vl,[e("button",{class:"btn btn-primary w-32 shadow-md ml-auto mt-7",onClick:m[8]||(m[8]=v=>c())},o(n.$t("settings.delivery_form.free_delivery_settings_update")),1)])]),e("div",Il,[e("div",Ul,o(n.$t("settings.delivery.delivery_method_settings")),1),b.value?(t(),z($,{key:0},{default:w(()=>[g(d,{class:"flex flex-wrap items-center justify-end gap-1 sm:gap-3 nav-boxed-tabs sm:px-10"},{default:w(()=>[(t(!0),s(f,null,I(l.value,(v,y)=>(t(),z(u,{class:"h-20 mx-auto border-[#131c34] w-[100%] max-w-[180px] text-center",tag:"button",key:y},{default:w(()=>[v.name==="Own Delivery"?(t(),s("div",Sl,[g(a,{icon:"fa-solid fa-money-check-dollar",class:"hidden sm:block h-6 mr-1"}),e("span",Cl,o(n.$t(`settings.delivery_form.delivery_titles.${v.key}`)),1)])):(t(),s("div",Dl,[g(a,{icon:"fa-regular fa-credit-card",class:"hidden sm:block h-6 mr-1"}),e("span",jl,o(n.$t(`settings.delivery_form.delivery_titles.${v.key}`)),1)]))]),_:2},1024))),128))]),_:1}),e("div",Ml,[g(V,null,{default:w(()=>[(t(!0),s(f,null,I(l.value,(v,y)=>(t(),z(p,{class:"leading-relaxed",key:y},{default:w(()=>[v.key=="own_delivery"?(t(),z(Is,{key:0,logistic:v},null,8,["logistic"])):v.key=="store_pickup"?(t(),z(Ws,{key:1,logistic:v},null,8,["logistic"])):(t(),z(hl,{key:2,logistic:v},null,8,["logistic"]))]),_:2},1024))),128))]),_:1})])]),_:1})):D("",!0)])],64)}}};const Ol={class:"flex flex-col p-2 font-medium text-sm sm:text-xl"},El={class:"flex flex-row items-center justify-center sm:justify-start sm:px-20 pb-4 intro-y lg:mt-5"},zl={class:"text-xl sm:text-2xl sm:mx-0 font-medium"},Rl={class:"flex flex-col gap-5 box lg:mx-20"},Al={class:"switch-toggle mx-auto sm:ml-14 mt-6 sm:mt-10"},Hl=["id","checked","value"],Nl=["for"],Ll={class:"pb-10 px-3"},Bl={__name:"Main",setup(P){const h=L(),i=j("general"),l=K(()=>{var _,U,r,c;var b=[{name:"general"},{name:"payment"},{name:"logistic"}];return((U=(_=h.userInfo)==null?void 0:_.user_subscription)==null?void 0:U.type)==="supplier"&&(b=b.filter(n=>n.name!="general"),b=b.filter(n=>n.name!="payment"),i.value="logistic"),((c=(r=h.userInfo)==null?void 0:r.user_subscription)==null?void 0:c.type)==="kol"&&(b=b.filter(n=>n.name!="payment"),i.value="general"),b});return(b,_)=>{const U=S("HelpCircleIcon"),r=S("Tippy");return t(),s("div",Ol,[e("div",El,[e("h2",zl,o(b.$t("settings.default_settings")),1),g(r,{class:"rounded-full w-30 whitespace-wrap","data-tippy-allowHTML":"true","data-tippy-placement":"right",content:b.$t("tooltips.settings.default_settings"),theme:"light"},{default:w(()=>[g(U,{class:"h-5 ml-1 tippy-icon"})]),_:1},8,["content"])]),e("div",Rl,[e("div",Al,[(t(!0),s(f,null,I(l.value,c=>(t(),s(f,{key:c},[T(e("input",{id:c.name,type:"radio",checked:i.value==c.name,value:c.name,"onUpdate:modelValue":_[0]||(_[0]=n=>i.value=n)},null,8,Hl),[[fe,i.value]]),e("label",{for:c.name},o(b.$t("settings.categorys."+c.name)),9,Nl)],64))),128))]),e("div",Ll,[e("div",{id:"general",class:W({hidden:i.value!=="general",block:i.value==="general"})},[g(lt)],2),e("div",{id:"payment",class:W({hidden:i.value!=="payment",block:i.value==="payment"})},[g(qt)],2),e("div",{id:"logistic",class:W({hidden:i.value!=="logistic",block:i.value==="logistic"})},[g(Pl)],2)])])])}}};var Fl=ye(Bl,[["__scopeId","data-v-48c72d94"]]);export{Fl as default};
