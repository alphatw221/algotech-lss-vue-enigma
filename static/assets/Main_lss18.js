import{u as R}from"./lss-buyer-order_lss.js";import{_ as A,u as J,r as $,j as a,c as i,d as r,F as c,f as b,t as o,h as e,e as l,g as m,b7 as K,a0 as Q,a4 as W,a as X,o as Y,bg as Z,A as ee,L as F,bh as te,U as oe,V as re}from"./lss.js";const se={class:"table table-report mt-5"},ae={class:"imgtd"},ie={class:"w-full flex"},de=["src"],le={class:"text-left w-fit"},ne={key:0,class:"font-medium text-primary"},ce=["data-content"],_e=["data-content"],pe=["data-content"],ue=["data-content"],me={__name:"OrderDetailTable",setup(p){J();const d=R(),t="https://storage.googleapis.com/lss_bucket/static/",h=$([{key:"image",name:"null"},{key:"product",name:"product"},{key:"order_code",name:"order_code"},{key:"qty",name:"qty"},{key:"price",name:"price"},{key:"subtotal",name:"sub_total"}]);return(_,v)=>(a(),i("table",se,[r("thead",null,[r("tr",null,[(a(!0),i(c,null,b(h.value,n=>(a(),i("th",{class:"whitespace-nowrap text-center",key:n.key},o(_.$t("order_detail.table."+n.name)),1))),128))])]),r("tbody",null,[(a(!0),i(c,null,b(e(d).order.order_products,(n,g)=>(a(),i("tr",{key:g,class:"intro-x"},[r("td",ae,[r("div",ie,[r("img",{tag:"img","data-action":"zoom",class:"rounded-lg w-14 h-14 zoom-in mx-auto mt-3 sm:mt-0",src:n.image||`${e(t)}no_image.jpeg`},null,8,de)])]),r("td",le,[n.type=="lucky_draw"?(a(),i("div",ne," *"+o(_.$t("lucky_draw.winner_modal.prize"))+"*",1)):l("",!0),m(" "+o(n.name),1)]),r("td",{class:"text-center","data-content":_.$t("shopping_cart.table.order_code")},o(n==null?void 0:n.order_code),9,ce),r("td",{class:"text-right","data-content":_.$t("order_detail.table.qty")},o(n.qty),9,_e),r("td",{class:"text-right","data-content":_.$t("order_detail.table.price")},o(e(d).order.currency)+" "+o((Math.floor(n.price*10**e(d).order.decimal_places)/10**e(d).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(d).order.price_unit?_.$t(`global.price_unit.${e(d).order.price_unit}`):""),9,pe),r("td",{class:"text-right","data-content":_.$t("order_detail.table.sub_total")},o(e(d).order.currency)+" "+o((Math.floor(n.subtotal*10**e(d).order.decimal_places)/10**e(d).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(d).order.price_unit?_.$t(`global.price_unit.${e(d).order.price_unit}`):""),9,ue)]))),128))])]))}};var he=A(me,[["__scopeId","data-v-2c4b8a62"]]);const ye=p=>(oe("data-v-bbda131e"),p=p(),re(),p),ve={class:"mb-10"},ge={class:"text-2xl text-base text-center my-5"},$e={class:"grid grid-cols-12 gap-5"},be={class:"col-span-12 lg:col-span-6 2xl:col-span-6"},fe={class:"w-full mx-2"},ke={class:"flex-row flex-wrap flex justify-start"},Se={class:"font-medium my-auto"},we={class:"font-medium btn rounded-full bg-secondary h-8 ml-3 cursor-auto"},Le={class:"flex mb-2"},Me={class:"font-medium mr-5"},Be={class:"box p-6 border-2 border-secondary flex flex-col gap-4"},De={class:"min-w-fit w-32"},Ce={class:"col-span-12 lg:col-span-6 2xl:col-span-6"},Te={class:"box p-6 border-2 border-secondary h-full"},Ge={class:"flex mb-4 dark:border-darkmode-400"},Ie={class:"text-lg"},Ne={class:"grid grid-cols-6 gap-3"},Oe={class:"col-start-1 col-span-2"},je={key:0,class:"col-start-3 col-span-4"},Ve={class:"col-start-1 col-span-2"},ze={class:"col-start-3 col-span-4"},qe={class:"col-start-1 col-span-2"},xe={key:0,class:"col-start-3 col-span-4"},Pe={key:1,class:"col-start-3 col-span-4"},Fe={key:2,class:"w-20 h-20 image-fit zoom-in absolute top-[110px] right-8"},Re={class:"col-start-1 col-span-2"},Ae={class:"col-start-3 col-span-4"},Je={class:"col-start-1 col-span-2"},Ue={class:"col-start-3 col-span-4"},Ee={class:"col-start-1 col-span-2"},He={class:"col-start-3 col-span-4"},Ke={class:"col-start-1 col-span-2"},Qe={class:"col-start-3 col-span-4"},We={class:"col-start-1 col-span-2"},Xe={class:"col-start-3 col-span-4"},Ye={class:"col-start-1 col-span-2"},Ze={class:"col-start-3 col-span-4"},et={class:"col-start-1 col-span-5 sm:col-span-2"},tt={class:"col-start-2 col-span-5 sm:col-start-3 sm:col-span-4"},ot={class:"col-start-2 col-span-5 sm:col-start-3 sm:col-span-4 -my-2"},rt={class:"col-start-1 col-span-2"},st={class:"col-start-3 col-span-4"},at={class:"col-start-1 col-span-2"},it={class:"col-start-3 col-span-3"},dt={class:"col-start-3 col-span-3"},lt=ye(()=>r("br",null,null,-1)),nt={class:"col-start-1 col-span-5 sm:col-span-2"},ct={class:"col-start-2 col-span-5 sm:col-start-3 sm:col-span-4"},_t={class:"col-start-2 col-span-5 sm:col-start-3 sm:col-span-4 -my-2"},pt={class:"col-start-2 col-span-5 sm:col-start-3 sm:col-span-4 -my-1"},ut={class:"col-start-1 col-span-2"},mt={class:"col-start-3 col-span-4"},ht={class:"w-full h-fit overflow-x-hidden sm:overflow-x-auto"},yt={class:"grid grid-cols-12 gap-2 mt-5"},vt={class:"box col-start-1 col-span-12 lg:col-start-9 2xl:col-start-9"},gt={class:"grid grid-cols-3 gap-2 p-3 text-right"},$t={class:"flex col-start-1 col-span-3 p-2 py-1"},bt={class:"mr-auto"},ft={key:0,class:"flex col-start-1 col-span-3 p-2 py-1"},kt={class:"mr-auto"},St={class:"text-danger"},wt={key:1,class:"flex col-start-1 col-span-3 p-2 py-1"},Lt={class:"mr-auto"},Mt={key:2,class:"flex col-start-1 col-span-3 p-2 py-1"},Bt={class:"mr-auto"},Dt={class:"flex col-start-1 col-span-3 p-2 py-1"},Ct={class:"mr-auto"},Tt={key:0},Gt={key:1},It={key:3,class:"flex col-start-1 col-span-3 p-2 py-1"},Nt={class:"mr-auto"},Ot={class:"text-danger"},jt={key:4,class:"flex col-start-1 col-span-3 p-2 py-1"},Vt={class:"mr-auto"},zt={class:"flex col-start-1 col-span-3 p-2 py-1"},qt={class:"mr-auto"},xt={__name:"Main",setup(p){const d=K(),t=R(),h=Q().appContext.config.globalProperties.$i18n;W();const _=J(),v=X(),n=$(!0),g=$([{name:"name",value:"shipping_first_name"},{name:"cellphone",value:"shipping_cellphone"},{name:"email",value:"shipping_email"},{name:"remark",value:"shipping_remark"}]);Y(()=>{Z(_.params.order_oid,d.alert).then(s=>{t.order=s.data,t.user_subscription=JSON.parse(JSON.stringify(s.data.user_subscription)),d.sellerInfo=s.data.campaign.user_subscription,h.locale=s.data.campaign.lang,n.value=!1})});const U=()=>{v.push({name:"buyer-order-payment-page",params:{order_oid:_.params.order_oid}})},E=()=>{confirm(h.global.t("order.confirm_cancel"))&&te(_.params.order_oid,d.alert).then(s=>{v.push({name:"buyer-shopping-cart-detail-page",params:{cart_oid:s.data}})})};return(s,y)=>{var f,k,S,w,L,M,B,D,C,T,G,I,N,O,j,V,z,q,x,P;const H=ee("Tippy");return a(),i("div",ve,[r("div",ge,o(s.$t("order_detail.order")),1),r("div",$e,[r("div",be,[r("div",fe,[r("div",ke,[r("span",Se,o(s.$t("order_detail.order_no"))+" # "+o(e(t).order.id),1),r("span",we,o(s.$t("order_detail."+e(t).order.status)),1),e(t).order.payment_status==="awaiting_payment"&&!e(t).order.payment_method.includes("ecpay")?(a(),i("button",{key:0,class:"btn btn-rounded-pending h-8 ml-auto sm:ml-3",onClick:y[0]||(y[0]=u=>U())},o(s.$t("order_detail.pay")),1)):l("",!0),((k=(f=e(t))==null?void 0:f.order)==null?void 0:k.status)!="complete"?(a(),i("button",{key:1,class:"btn btn-warning h-8 ml-3 text-base",onClick:y[1]||(y[1]=u=>E())},o("Cancel"))):l("",!0)]),r("div",Le,[r("span",Me,o(s.$t("order_detail.order_date"))+" : "+o(new Date(e(t).order.created_at).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"})),1)])]),r("div",Be,[(a(!0),i(c,null,b(g.value,u=>(a(),i("div",{key:u.name,class:"flex"},[r("p",De,o(s.$t("order_detail.delivery."+u.name)),1),r("p",null,o(e(t).order[u.value]),1)]))),128))])]),r("div",Ce,[r("div",Te,[r("div",Ge,[r("span",Ie,o(s.$t("order_detail.order_info")),1)]),r("div",Ne,[r("div",Oe,o(s.$t("order_detail.payment.method")),1),e(t).order.payment_method?(a(),i("div",je,o(e(t).order.payment_method=="direct_payment"?`${s.$t("order_detail.payment.Direct Payment")} - ${e(t).order.meta.account_mode}`:s.$t(`order_detail.payment.${e(t).order.payment_method}`)),1)):l("",!0),(S=e(t).order.meta)!=null&&S.InvoiceNumber?(a(),i(c,{key:1},[r("div",Ve,o(s.$t("order_detail.payment.invoice")),1),r("div",ze,o(e(t).order.meta.InvoiceNumber),1)],64)):l("",!0),e(t).order.payment_method=="direct_payment"?(a(),i(c,{key:2},[r("div",qe,o(s.$t("order_detail.payment.last_five_digits")),1),e(t).order.meta.last_five_digit==""&&!e(t).order.meta.receipt_image?(a(),i("div",xe,o(s.$t("order_detail.payment.no_record")),1)):(a(),i("div",Pe,o(e(t).order.meta.last_five_digit),1)),e(t).order.meta.receipt_image?(a(),i("div",Fe,[F(H,{tag:"img","data-action":"zoom",content:"receipt image",class:"rounded-lg",src:e(t).order.meta.receipt_image},null,8,["src"])])):l("",!0)],64)):l("",!0),r("div",Re,o(s.$t("order.payment_status")),1),r("div",Ae,o(s.$t(`order.payment_status_options.${e(t).order.payment_status}`)),1),((M=(L=(w=e(t).user_subscription)==null?void 0:w.user_plan)==null?void 0:L.hide)==null?void 0:M.order_delivery_status)==!1?(a(),i(c,{key:3},[r("div",Je,o(s.$t("order.delivery_status")),1),r("div",Ue,o(s.$t(`order.delivery_status_options.${e(t).order.delivery_status}`)),1)],64)):l("",!0),e(t).order.shipping_method==="pickup"?(a(),i(c,{key:4},[r("div",Ee,o(s.$t("order_detail.delivery.information")),1),r("p",He,o(s.$t("order_detail.delivery.pickup")),1),r("div",Ke,o(s.$t("order_detail.delivery.pickupTime")),1),r("p",Qe,o(new Date(e(t).order.shipping_date_time).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"})||"")+", "+o(e(t).order.shipping_time_slot||""),1),r("div",We,o((B=e(t).order)==null?void 0:B.shipping_option),1),r("div",Xe,o((D=e(t).order)==null?void 0:D.pickup_address),1)],64)):e(t).order.shipping_method==="delivery"?(a(),i(c,{key:5},[r("div",Ye,o(s.$t("order_detail.delivery.information")),1),r("div",Ze,o(s.$t("order_detail.delivery.delivery"))+"\uFF1A"+o(e(t).order.shipping_option||s.$t("order_detail.delivery.default")),1),(C=e(t).order.shipping_option_data)!=null&&C.is_cvs?(a(),i(c,{key:0},[r("div",et,o(s.$t("order_detail.delivery.cvs")),1),r("div",tt,o((T=e(t).order.shipping_option_data)==null?void 0:T.cvs_store_name),1),r("div",ot,o((G=e(t).order.shipping_option_data)==null?void 0:G.cvs_address),1)],64)):(a(),i(c,{key:1},[r("div",rt,o(s.$t("order_detail.delivery.address")),1),r("div",st,o(e(t).order.shipping_postcode)+", "+o(e(t).order.shipping_address_1)+" , "+o(e(t).order.shipping_location)+" , "+o(e(t).order.shipping_region)+" "+o(e(t).order.shipping_property_type||""),1)],64)),e(t).order.shipping_date_time&&e(t).order.shipping_time_slot&&!((I=e(t).order.shipping_option_data)!=null&&I.is_cvs)?(a(),i(c,{key:2},[r("div",at,o(s.$t("order_detail.delivery.deliveryTime")),1),r("div",it,[r("p",dt,[m(o(new Date(e(t).order.shipping_date_time).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"}))+" ",1),lt,m(" "+o(e(t).order.shipping_time_slot||""),1)])])],64)):l("",!0)],64)):e(t).order.shipping_method==="ecpay"?(a(),i(c,{key:6},[e(t).order.shipping_option_data.logisticsType=="CVS"?(a(),i(c,{key:0},[r("div",nt,o(s.$t("order_detail.delivery.cvs")),1),r("div",ct,o(e(t).order.shipping_option_data.LogisticsSubType=="UNIMARTC2C"?"7-11\u5E97\u5230\u5E97":"\u5168\u5BB6\u5E97\u5230\u5E97"),1),r("div",_t,o((N=e(t).order.shipping_option_data)==null?void 0:N.cvs_store_name),1),r("div",pt,o((O=e(t).order.shipping_option_data)==null?void 0:O.cvs_address),1)],64)):(a(),i(c,{key:1},[r("div",ut,o(s.$t("order_detail.delivery.address")),1),r("div",mt,o(e(t).order.shipping_postcode)+" "+o(e(t).order.shipping_region)+", "+o(e(t).order.shipping_location)+", "+o(e(t).order.shipping_address_1)+" "+o(e(t).order.shipping_property_type||""),1)],64))],64)):l("",!0)])])])]),r("div",ht,[F(he)]),r("div",yt,[r("div",vt,[r("div",gt,[r("div",$t,[r("div",bt,o(s.$t("order_detail.price_summary.sub_total")),1),r("div",null,o(e(t).order.currency)+" "+o((Math.floor(e(t).order.subtotal*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1)]),e(t).order.discount!=0?(a(),i("div",ft,[r("div",kt,[m(o(s.$t("shopping_cart.order_summary.promo_discount"))+" ",1),r("span",St,o((j=e(t).order.applied_discount)!=null&&j.code?e(t).order.applied_discount.code:""),1)]),r("div",null,o(e(t).order.currency)+" -"+o((Math.floor(e(t).order.discount*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1)])):l("",!0),((V=e(t).order)==null?void 0:V.point_discount)!=0?(a(),i("div",wt,[r("div",Lt,o(s.$t("order.point_discount")),1),r("div",null,o(e(t).order.currency)+" "+o((Math.floor(e(t).order.point_discount*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1)])):l("",!0),e(t).order.discount!=0||e(t).order.point_discount!=0?(a(),i("div",Mt,[r("div",Bt,o(s.$t("cart.subtotal_after_discount")),1),r("div",null,o(e(t).order.currency)+" "+o((Math.floor(Math.max(e(t).order.subtotal-e(t).order.discount-e(t).order.point_discount,0)*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1)])):l("",!0),r("div",Dt,[r("div",Ct,o(s.$t("order_detail.price_summary.delivery_charge")),1),e(t).order.free_delivery||((q=(z=e(t).order)==null?void 0:z.meta)==null?void 0:q.subtotal_over_free_delivery_threshold)||((P=(x=e(t).order)==null?void 0:x.meta)==null?void 0:P.items_over_free_delivery_threshold)?(a(),i("div",Tt,o(e(t).order.currency)+" "+o((Math.floor(0*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1)):(a(),i("div",Gt,o(e(t).order.currency)+" "+o((Math.floor(e(t).order.shipping_cost*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1))]),e(t).order.adjust_price!=0?(a(),i("div",It,[r("div",Nt,[m(o(s.$t("order_detail.price_summary.price_adjustment"))+" ",1),r("span",Ot,o(e(t).order.adjust_title),1)]),r("div",null,o(e(t).order.currency)+" "+o((Math.floor(e(t).order.adjust_price*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1)])):l("",!0),e(t).order.tax?(a(),i("div",jt,[r("div",Vt,o(s.$t("order_detail.price_summary.tax")),1),r("div",null,o(e(t).order.currency)+" "+o((Math.floor(parseFloat(e(t).order.tax)*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1)])):l("",!0),r("div",zt,[r("div",qt,o(s.$t("order_detail.price_summary.total")),1),r("div",null,o(e(t).order.currency)+" "+o((Math.floor(e(t).order.total*10**e(t).order.decimal_places)/10**e(t).order.decimal_places).toLocaleString("en-GB"))+" "+o(e(t).order.price_unit?s.$t(`global.price_unit.${e(t).order.price_unit}`):""),1)])])])])])}}};var Rt=A(xt,[["__scopeId","data-v-bbda131e"]]);export{Rt as default};
