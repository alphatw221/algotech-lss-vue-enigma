import{_ as B,b as S,u as D,a as H,r as d,o as L,A as N,j as a,c as s,d as r,T as V,e as C,F as i,f as v,t as l,g as p,L as T,aI as I,a4 as M,a0 as A,w as F,h as R}from"./lss.js";import{L as E}from"./LoadingTable_lss2.js";const G={class:"overflow-x-auto h-full sm:h-[62vh]"},q={key:1,class:"table table-report mt-2 table-auto"},J=["data-content"],K=["onClick"],Q={class:"md:hidden"},U={class:"hidden md:inline"},W={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},X={__name:"OrderHistoryTable",setup(P){const c=S(),g=D(),y=H(),_=g.params.buyer_id,n=d(!1),u=d(1);d(1);const x=d(10),$=d(0),w=d([]),f=d([{name:"order_no",key:"id",type:"int"},{name:"date",key:"created_at",type:"dateTime"},{name:"payment_method",key:"payment_method",type:"string"},{name:"amount",key:"total",type:"float"},{name:"status",key:"status",type:"string"},{name:"action",key:"action",type:"link"}]),j=e=>{y.push({name:"seller-buyers-order-detail",params:{buyer_id:_,order_id:e}})},z=e=>{u.value=e,b()},O=e=>{e.value=e,b()},b=()=>{n.value=!1,I(_,u.value,x.value,c.alert).then(e=>{var k,m,t,h;c.buyer=e.data.results?(m=(k=e.data.results)==null?void 0:k[0])==null?void 0:m.buyer:(h=(t=e.data)==null?void 0:t[0])==null?void 0:h.buyer,$.value=e.data.count?e.data.count:e.data.length,w.value=e.data.results?e.data.results:e.data,n.value=!0})};return L(()=>{b()}),(e,k)=>{const m=N("Page");return a(),s(i,null,[r("div",G,[n.value==!1?(a(),V(E,{key:0,column:f.value,tableName:"order_history"},null,8,["column"])):C("",!0),n.value==!0?(a(),s("table",q,[r("thead",null,[r("tr",null,[(a(!0),s(i,null,v(f.value,t=>(a(),s("th",{class:"whitespace-nowrap",key:t.key},l(e.$t("order_history.table."+t.name)),1))),128))])]),r("tbody",null,[(a(!0),s(i,null,v(w.value,(t,h)=>(a(),s("tr",{class:"intro-x",style:{"line-height":"30px"},key:h},[(a(!0),s(i,null,v(f.value,o=>(a(),s("td",{class:"w-12 text-[12px] lg:w-18 lg:text-sm 2xl:w-32 2xl:text-sm",key:o.key,"data-content":e.$t("order_history.table."+o.name)},[o.key==="action"?(a(),s("a",{key:0,onClick:ne=>j(t.id)},[r("u",Q,l(e.$t("order_history.table.view")),1),r("u",U,l(e.$t("order_history.table.view")),1)],8,K)):o.type=="dateTime"?(a(),s(i,{key:1},[p(l(new Date(t[o.key]).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"})),1)],64)):o.key=="total"?(a(),s(i,{key:2},[p(l(t.currency)+" "+l((Math.floor(t[o.key]*10**t.decimal_places)/10**t.decimal_places).toLocaleString("en-GB"))+" "+l(t.price_unit?e.$t(`global.price_unit.${t.price_unit}`):""),1)],64)):o.key=="payment_method"&&t[o.key]?(a(),s(i,{key:3},[p(l(t[o.key]=="direct_payment"?`${e.$t("order_history.direct_payment")} - ${t.meta.account_mode}`:e.$t(`order_history.${t[o.key]}`)),1)],64)):o.key=="status"?(a(),s(i,{key:4},[p(l(e.$t(`order_history.${t[o.key]}`)),1)],64)):(a(),s(i,{key:5},[p(l(t[o.key]),1)],64))],8,J))),128))]))),128))])])):C("",!0)]),r("div",W,[T(m,{class:"mx-auto my-3 flex flex-row flex-wrap justify-center gap-1 mb-10",total:$.value,"page-size":x.value,onOnChange:z,onOnPageSizeChange:O},null,8,["total","page-size"])])],64)}}};var Y=B(X,[["__scopeId","data-v-464a766d"]]);const Z={class:"box grid grid-cols-12 gap-5 m-0 my-5 p-2 py-5 lg:m-5 lg:p-10 2xl:m-5 2xl:p-10"},ee={class:"text-xl col-span-12 justify-self-center",style:{"font-size":"1.5rem"}},te={class:"col-start-1 col-span-12 justify-self-center lg:col-span-3 2xl:col-span-3"},ae={class:"h-48 w-44 box border-2 border-slate-200 flex flex-col items-center justify-center gap-0.5"},se={class:"w-28 h-28 flex-none image-fit mr-1"},oe=["src"],re={class:"text-lg"},le={for:"orderHistoryTable",class:"box border-2 border-slate-200 col-start-1 col-span-12 lg:col-start-4 lg:col-span-9 2xl:col-start-4 2xl:col-span-9"},ue={__name:"Main",setup(P){M();const c=S();A().appContext.config.globalProperties.$i18n;const g=F(()=>{var y,_,n,u;return(_=(y=c.buyer)==null?void 0:y.facebook_info)!=null&&_.picture?c.buyer.facebook_info.picture:(u=(n=c.buyer)==null?void 0:n.google_info)!=null&&u.picture?c.buyer.google_info.picture:"https://storage.googleapis.com/lss_bucket/static/fake_head.jpeg"});return L(()=>{}),(y,_)=>{var n,u;return a(),s("div",Z,[r("h1",ee,l(y.$t("order_history.order_history")),1),r("div",te,[r("div",ae,[r("div",se,[r("img",{alt:"",class:"rounded-full zoom-in",src:g.value},null,8,oe)]),r("div",re,l((u=(n=R(c))==null?void 0:n.buyer)==null?void 0:u.name),1)])]),r("div",le,[T(Y)])])}}};export{ue as default};
